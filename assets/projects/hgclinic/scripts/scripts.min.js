"use strict";var $navIcon=document.querySelector(".header-nav__icon");$navIcon.addEventListener("click",(function(){document.body.scrollTop>150||document.documentElement.scrollTop,document.body.classList.toggle("nav-active")}));var $navList=document.querySelector(".header-nav__list");$navList.addEventListener("click",(function(e){!document.body.classList.contains("nav-active")||document.body.classList.contains("dropdown-active")||e.target.closest(".header-dropdown")||e.target.closest(".header-dropdown__content")||document.body.classList.remove("nav-active")}));var $header=document.querySelector(".header");function scrollFunction(){document.body.scrollTop>150||document.documentElement.scrollTop>150?document.body.classList.add("nav-fixed"):(document.body.classList.remove("nav-fixed"),document.body.classList.contains("nav-active")&&document.body.classList.remove("nav-active"))}window.onscroll=function(){scrollFunction()};var $headerDropdown=document.querySelector(".header-dropdown"),$headerDropdownBtn=document.querySelector(".header-dropdown__btn"),$headerDropdownContent=document.querySelector(".header-dropdown__content");if($headerDropdown.addEventListener("click",(function(){document.body.classList.toggle("dropdown-active")})),document.body.addEventListener("click",(function(e){document.body.classList.contains("dropdown-active")&&!e.target.closest(".header-dropdown")?(document.body.classList.remove("dropdown-active"),$headerDropdownContent.style.display="none"):document.body.classList.contains("dropdown-active")?$headerDropdownContent.style.display="block":$headerDropdownContent.style.display="none"})),document.querySelectorAll('a[href^="#"').forEach((function(e){e.getAttribute("href").length>1&&e.addEventListener("click",(function(e){e.preventDefault(),document.querySelector(this.getAttribute("href")).scrollIntoView({behavior:"smooth"})}))})),"index"===document.body.dataset.page){var swiper1=new Swiper(".review__slider",{loop:!0,pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}}),swiper2=new Swiper(".reviewimg__slider",{slidesPerView:1,loop:!0,pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},breakpoints:{959:{slidesPerView:9,spaceBetween:20}}}),swiper3=new Swiper(".condition1__slider",{loop:!0,effect:"fade",autoplay:{delay:2500,disableOnInteraction:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}});function openModal(e){var t,n=e.target.closest("button");n.classList.contains("btn-modal1")&&(t=document.querySelector(".modal1")),n.classList.contains("btn-modal2")&&(t=document.querySelector(".modal2")),n.classList.contains("btn-modal3")&&(t=document.querySelector(".modal3")),document.body.classList.toggle("modal-active"),t.style.display="block",t.addEventListener("click",(function(e){e.target.closest(".modal-content")||(document.body.classList.toggle("modal-active"),t.style.display="none")}))}document.querySelectorAll(".btn-modal1").forEach((function(e){return e.addEventListener("click",openModal)})),document.querySelector(".btn-modal2").addEventListener("click",openModal),document.querySelector(".btn-modal3").addEventListener("click",openModal)}if("index"!==document.body.dataset.page){function openModal(e){var t;e.target.closest("button").classList.contains("btn-modal1")&&(t=document.querySelector(".modal1")),document.body.classList.toggle("modal-active"),t.style.display="block",t.addEventListener("click",(function(e){e.target.closest(".modal-content")||(document.body.classList.toggle("modal-active"),t.style.display="none")}))}document.querySelectorAll(".btn-modal1").forEach((function(e){return e.addEventListener("click",openModal)}))}
/*!
 * @copyright Copyright (c) 2017 IcoMoon.io
 * @license   Licensed under MIT license
 *            See https://github.com/Keyamoon/svgxuse
 * @version   1.2.6
 */!function(){if("undefined"!=typeof window&&window.addEventListener){var e,t,n,o=Object.create(null),i=function(){clearTimeout(t),t=setTimeout(e,100)},d=function(){},r=function(e){function t(e){var t;return void 0!==e.protocol?t=e:(t=document.createElement("a")).href=e,t.protocol.replace(/:/g,"")+t.host}var n,o,i;return window.XMLHttpRequest&&(n=new XMLHttpRequest,o=t(location),i=t(e),n=void 0===n.withCredentials&&""!==i&&i!==o?XDomainRequest||void 0:XMLHttpRequest),n},c="http://www.w3.org/1999/xlink";e=function(){var e,t,n,a,s,l,u,m,v,p,w=0;function b(){var e;0===(w-=1)&&(d(),window.addEventListener("resize",i,!1),window.addEventListener("orientationchange",i,!1),window.MutationObserver?((e=new MutationObserver(i)).observe(document.documentElement,{childList:!0,subtree:!0,attributes:!0}),d=function(){try{e.disconnect(),window.removeEventListener("resize",i,!1),window.removeEventListener("orientationchange",i,!1)}catch(e){}}):(document.documentElement.addEventListener("DOMSubtreeModified",i,!1),d=function(){document.documentElement.removeEventListener("DOMSubtreeModified",i,!1),window.removeEventListener("resize",i,!1),window.removeEventListener("orientationchange",i,!1)}))}function h(e){return function(){!0!==o[e.base]&&(e.useEl.setAttributeNS(c,"xlink:href","#"+e.hash),e.useEl.hasAttribute("href")&&e.useEl.setAttribute("href","#"+e.hash))}}function y(e){return function(){var t,n=document.body,o=document.createElement("x");e.onload=null,o.innerHTML=e.responseText,(t=o.getElementsByTagName("svg")[0])&&(t.setAttribute("aria-hidden","true"),t.style.position="absolute",t.style.width=0,t.style.height=0,t.style.overflow="hidden",n.insertBefore(t,n.firstChild)),b()}}function f(e){return function(){e.onerror=null,e.ontimeout=null,b()}}for(d(),v=document.getElementsByTagName("use"),s=0;s<v.length;s+=1){try{t=v[s].getBoundingClientRect()}catch(e){t=!1}e=(m=(a=v[s].getAttribute("href")||v[s].getAttributeNS(c,"href")||v[s].getAttribute("xlink:href"))&&a.split?a.split("#"):["",""])[0],n=m[1],l=t&&0===t.left&&0===t.right&&0===t.top&&0===t.bottom,t&&0===t.width&&0===t.height&&!l?(v[s].hasAttribute("href")&&v[s].setAttributeNS(c,"xlink:href",a),e.length&&(!0!==(p=o[e])&&setTimeout(h({useEl:v[s],base:e,hash:n}),0),void 0===p&&void 0!==(u=r(e))&&(p=new u,o[e]=p,p.onload=y(p),p.onerror=f(p),p.ontimeout=f(p),p.open("GET",e),p.send(),w+=1))):l?e.length&&o[e]&&setTimeout(h({useEl:v[s],base:e,hash:n}),0):void 0===o[e]?o[e]=!0:o[e].onload&&(o[e].abort(),delete o[e].onload,o[e]=!0)}v="",w+=1,b()},n=function(){window.removeEventListener("load",n,!1),t=setTimeout(e,0)},"complete"!==document.readyState?window.addEventListener("load",n,!1):n()}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdHMuanMiXSwibmFtZXMiOlsiJG5hdkljb24iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJhZGRFdmVudExpc3RlbmVyIiwiYm9keSIsInNjcm9sbFRvcCIsImRvY3VtZW50RWxlbWVudCIsImNsYXNzTGlzdCIsInRvZ2dsZSIsIiRuYXZMaXN0IiwiZXZlbnQiLCJjb250YWlucyIsInRhcmdldCIsImNsb3Nlc3QiLCJyZW1vdmUiLCIkaGVhZGVyIiwic2Nyb2xsRnVuY3Rpb24iLCJhZGQiLCJ3aW5kb3ciLCJvbnNjcm9sbCIsIiRoZWFkZXJEcm9wZG93biIsIiRoZWFkZXJEcm9wZG93bkJ0biIsIiRoZWFkZXJEcm9wZG93bkNvbnRlbnQiLCJzdHlsZSIsImRpc3BsYXkiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImxpbmsiLCJnZXRBdHRyaWJ1dGUiLCJsZW5ndGgiLCJlIiwicHJldmVudERlZmF1bHQiLCJ0aGlzIiwic2Nyb2xsSW50b1ZpZXciLCJiZWhhdmlvciIsImRhdGFzZXQiLCJwYWdlIiwic3dpcGVyMSIsIlN3aXBlciIsImxvb3AiLCJwYWdpbmF0aW9uIiwiZWwiLCJjbGlja2FibGUiLCJuYXZpZ2F0aW9uIiwibmV4dEVsIiwicHJldkVsIiwic3dpcGVyMiIsInNsaWRlc1BlclZpZXciLCJicmVha3BvaW50cyIsIjk1OSIsInNwYWNlQmV0d2VlbiIsInN3aXBlcjMiLCJlZmZlY3QiLCJhdXRvcGxheSIsImRlbGF5IiwiZGlzYWJsZU9uSW50ZXJhY3Rpb24iLCJvcGVuTW9kYWwiLCJtb2RhbCIsImJ1dHRvbiIsImNoZWNrVXNlRWxlbXMiLCJ0aWQiLCJ3aW5Mb2FkIiwiY2FjaGUiLCJPYmplY3QiLCJjcmVhdGUiLCJkZWJvdW5jZWRDaGVjayIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJ1bm9ic2VydmVDaGFuZ2VzIiwiY3JlYXRlUmVxdWVzdCIsInVybCIsImdldE9yaWdpbiIsImxvYyIsImEiLCJ1bmRlZmluZWQiLCJwcm90b2NvbCIsImNyZWF0ZUVsZW1lbnQiLCJocmVmIiwicmVwbGFjZSIsImhvc3QiLCJSZXF1ZXN0Iiwib3JpZ2luIiwib3JpZ2luMiIsIlhNTEh0dHBSZXF1ZXN0IiwibG9jYXRpb24iLCJ3aXRoQ3JlZGVudGlhbHMiLCJYRG9tYWluUmVxdWVzdCIsInhsaW5rTlMiLCJiYXNlIiwiYmNyIiwiaGFzaCIsImkiLCJpc0hpZGRlbiIsInVzZXMiLCJ4aHIiLCJpblByb2dyZXNzQ291bnQiLCJvYnNlcnZlSWZEb25lIiwib2JzZXJ2ZXIiLCJNdXRhdGlvbk9ic2VydmVyIiwib2JzZXJ2ZSIsImNoaWxkTGlzdCIsInN1YnRyZWUiLCJhdHRyaWJ1dGVzIiwiZGlzY29ubmVjdCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJpZ25vcmUiLCJhdHRyVXBkYXRlRnVuYyIsInNwZWMiLCJ1c2VFbCIsInNldEF0dHJpYnV0ZU5TIiwiaGFzQXR0cmlidXRlIiwic2V0QXR0cmlidXRlIiwib25sb2FkRnVuYyIsInN2ZyIsIngiLCJvbmxvYWQiLCJpbm5lckhUTUwiLCJyZXNwb25zZVRleHQiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInBvc2l0aW9uIiwid2lkdGgiLCJoZWlnaHQiLCJvdmVyZmxvdyIsImluc2VydEJlZm9yZSIsImZpcnN0Q2hpbGQiLCJvbkVycm9yVGltZW91dCIsIm9uZXJyb3IiLCJvbnRpbWVvdXQiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJnZXRBdHRyaWJ1dGVOUyIsInNwbGl0IiwibGVmdCIsInJpZ2h0IiwidG9wIiwiYm90dG9tIiwib3BlbiIsInNlbmQiLCJhYm9ydCIsInJlYWR5U3RhdGUiXSwibWFwcGluZ3MiOiJBQUFBLGFBQ0EsSUFBSUEsU0FBV0MsU0FBU0MsY0FBYyxxQkFFdENGLFNBQVNHLGlCQUFpQixTQUFTLFdBQzNCRixTQUFTRyxLQUFLQyxVQUFZLEtBQU9KLFNBQVNLLGdCQUFnQkQsVUFDMURKLFNBQVNHLEtBQUtHLFVBQVVDLE9BQU8saUJBT3ZDLElBQU1DLFNB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ZEEsRUFBSStCLE9BQThCLElBQWYvQixFQUFJZ0MsU0FBaUI3QixHQU8zQ0MsRUFBS0YsR0FBR21CLGFBQWEsU0FDckJqQixFQUFLRixHQUFHa0IsZUFBZXRCLEVBQVMsYUFBY1YsR0FFOUNXLEVBQUszRCxVQUdPLEtBRFppRSxFQUFNaEMsRUFBTTBCLEtBR1JyQixXQUFXdUMsRUFBZSxDQUN0QkUsTUFBT2YsRUFBS0YsR0FDWkgsS0FBTUEsRUFDTkUsS0FBTUEsSUFDTixRQUVJaEIsSUFBUm9CLFFBRWdCcEIsS0FEaEJNLEVBQVVYLEVBQWNtQixNQUVwQk0sRUFBTSxJQUFJZCxFQUNWbEIsRUFBTTBCLEdBQVFNLEVBQ2RBLEVBQUlxQixPQUFTSCxFQUFXbEIsR0FDeEJBLEVBQUlnQyxRQUFVRCxFQUFlL0IsR0FDN0JBLEVBQUlpQyxVQUFZRixFQUFlL0IsR0FDL0JBLEVBQUl5QyxLQUFLLE1BQU8vQyxHQUNoQk0sRUFBSTBDLE9BQ0p6QyxHQUFtQixLQUsxQkgsRUFXTUosRUFBSzNELFFBQVVpQyxFQUFNMEIsSUFDNUJyQixXQUFXdUMsRUFBZSxDQUN0QkUsTUFBT2YsRUFBS0YsR0FDWkgsS0FBTUEsRUFDTkUsS0FBTUEsSUFDTixRQWZnQmhCLElBQWhCWixFQUFNMEIsR0FFTjFCLEVBQU0wQixJQUFRLEVBQ1AxQixFQUFNMEIsR0FBTTJCLFNBR25CckQsRUFBTTBCLEdBQU1pRCxlQUNMM0UsRUFBTTBCLEdBQU0yQixPQUNuQnJELEVBQU0wQixJQUFRLEdBVzlCSyxFQUFPLEdBQ1BFLEdBQW1CLEVBQ25CQyxLQUdKbkMsRUFBVSxXQUNOM0MsT0FBT3NGLG9CQUFvQixPQUFRM0MsR0FBUyxHQUM1Q0QsRUFBTU8sV0FBV1IsRUFBZSxJQUVSLGFBQXhCMUQsU0FBU3lJLFdBRVR4SCxPQUFPZixpQkFBaUIsT0FBUTBELEdBQVMsR0FHekNBLEtBMU5YIiwiZmlsZSI6InNjcmlwdHMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gbmF2IG1vYmlsZSB0b2dnbGVcclxubGV0ICRuYXZJY29uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlci1uYXZfX2ljb24nKTtcclxuXHJcbiRuYXZJY29uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgaWYgKGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wID4gMTUwIHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgPiAxNTApIHtcclxuICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC50b2dnbGUoJ25hdi1hY3RpdmUnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QudG9nZ2xlKCduYXYtYWN0aXZlJyk7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxuLy8gY2xvc2UgbmF2IGlmIGNsaWNrIG5hdiBsaXN0XHJcbmNvbnN0ICRuYXZMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlci1uYXZfX2xpc3QnKTtcclxuXHJcbiRuYXZMaXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICBpZiAoZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuY29udGFpbnMoJ25hdi1hY3RpdmUnKSAmJiAhZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuY29udGFpbnMoJ2Ryb3Bkb3duLWFjdGl2ZScpICYmICFldmVudC50YXJnZXQuY2xvc2VzdCgnLmhlYWRlci1kcm9wZG93bicpICYmICFldmVudC50YXJnZXQuY2xvc2VzdCgnLmhlYWRlci1kcm9wZG93bl9fY29udGVudCcpKSB7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCduYXYtYWN0aXZlJyk7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxuLy8gbmF2IG9wYWNpdHkgb24gc2Nyb2xsXHJcbmxldCAkaGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcicpO1xyXG53aW5kb3cub25zY3JvbGwgPSBmdW5jdGlvbigpIHtzY3JvbGxGdW5jdGlvbigpfTtcclxuXHJcbmZ1bmN0aW9uIHNjcm9sbEZ1bmN0aW9uKCkge1xyXG4gICAgaWYgKGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wID4gMTUwIHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgPiAxNTApIHtcclxuICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ25hdi1maXhlZCcpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ25hdi1maXhlZCcpO1xyXG4gICAgICAgIGlmIChkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5jb250YWlucygnbmF2LWFjdGl2ZScpKSBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ25hdi1hY3RpdmUnKTtcclxuICAgIH1cclxufVxyXG5cclxubGV0ICRoZWFkZXJEcm9wZG93biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXItZHJvcGRvd24nKTtcclxubGV0ICRoZWFkZXJEcm9wZG93bkJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXItZHJvcGRvd25fX2J0bicpO1xyXG5sZXQgJGhlYWRlckRyb3Bkb3duQ29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXItZHJvcGRvd25fX2NvbnRlbnQnKVxyXG5cclxuLy8gYXJ0aWNsZSBidG4gaW4gaGVhZGVyIHNob3cgbGlzdFxyXG4kaGVhZGVyRHJvcGRvd24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC50b2dnbGUoJ2Ryb3Bkb3duLWFjdGl2ZScpO1xyXG59KTtcclxuXHJcbi8vIGlmIGFydGljbGUgZHJvcGRvd24gYWN0aXZlIGFuZCBjbGljayBlbnl3aGVyZSBleGNlcHQgZHJvcGRvd24gb3IgYnRuXHJcbmRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgIGlmIChkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5jb250YWlucygnZHJvcGRvd24tYWN0aXZlJykgJiYgIWV2ZW50LnRhcmdldC5jbG9zZXN0KCcuaGVhZGVyLWRyb3Bkb3duJyB8fCAnLmhlYWRlci1kcm9wZG93bl9fY29udGVudCcgfHwgJy5oZWFkZXItZHJvcGRvd25fX2J0bicpKSB7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdkcm9wZG93bi1hY3RpdmUnKTtcclxuICAgICAgICAkaGVhZGVyRHJvcGRvd25Db250ZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcclxuICAgIH0gZWxzZSBpZiAoZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuY29udGFpbnMoJ2Ryb3Bkb3duLWFjdGl2ZScpKSB7XHJcbiAgICAgICAgJGhlYWRlckRyb3Bkb3duQ29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJ1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICAkaGVhZGVyRHJvcGRvd25Db250ZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcclxuICAgIH1cclxufSk7XHJcblxyXG4vLyBhbmNob3JzIHNtb290aCBzY3JvbGxcclxuZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnYVtocmVmXj1cIiNcIicpLmZvckVhY2goKGxpbmspID0+IHtcclxuICAgIGlmIChsaW5rLmdldEF0dHJpYnV0ZSgnaHJlZicpLmxlbmd0aCA+IDEpIHtcclxuICAgICAgICBsaW5rLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLmdldEF0dHJpYnV0ZSgnaHJlZicpKS5zY3JvbGxJbnRvVmlldyh7XHJcbiAgICAgICAgICAgICAgICBiZWhhdmlvcjogJ3Ntb290aCcsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59KTtcclxuXHJcblxyXG5pZiAoZG9jdW1lbnQuYm9keS5kYXRhc2V0LnBhZ2UgPT09ICdpbmRleCcpIHtcclxuXHJcbiAgICAvLyBzbGlkZXJzXHJcbiAgICBjb25zdCBzd2lwZXIxID0gbmV3IFN3aXBlcignLnJldmlld19fc2xpZGVyJywge1xyXG4gICAgICAgIGxvb3A6IHRydWUsXHJcblxyXG4gICAgICAgIHBhZ2luYXRpb246IHtcclxuICAgICAgICAgICAgZWw6ICcuc3dpcGVyLXBhZ2luYXRpb24nLFxyXG4gICAgICAgICAgICBjbGlja2FibGU6IHRydWUsXHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgbmF2aWdhdGlvbjoge1xyXG4gICAgICAgICAgICBuZXh0RWw6ICcuc3dpcGVyLWJ1dHRvbi1uZXh0JyxcclxuICAgICAgICAgICAgcHJldkVsOiAnLnN3aXBlci1idXR0b24tcHJldicsXHJcbiAgICAgICAgfSxcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IHN3aXBlcjIgPSBuZXcgU3dpcGVyKCcucmV2aWV3aW1nX19zbGlkZXInLCB7XHJcbiAgICAgICAgc2xpZGVzUGVyVmlldzogMSxcclxuICAgICAgICBsb29wOiB0cnVlLFxyXG5cclxuICAgICAgICBwYWdpbmF0aW9uOiB7XHJcbiAgICAgICAgICAgIGVsOiAnLnN3aXBlci1wYWdpbmF0aW9uJyxcclxuICAgICAgICAgICAgY2xpY2thYmxlOiB0cnVlLFxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIG5hdmlnYXRpb246IHtcclxuICAgICAgICAgICAgbmV4dEVsOiAnLnN3aXBlci1idXR0b24tbmV4dCcsXHJcbiAgICAgICAgICAgIHByZXZFbDogJy5zd2lwZXItYnV0dG9uLXByZXYnLFxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGJyZWFrcG9pbnRzOiB7XHJcbiAgICAgICAgICAgIDk1OToge1xyXG4gICAgICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogOSxcclxuICAgICAgICAgICAgICAgIHNwYWNlQmV0d2VlbjogMjAsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSxcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IHN3aXBlcjMgPSBuZXcgU3dpcGVyKCcuY29uZGl0aW9uMV9fc2xpZGVyJywge1xyXG4gICAgICAgIGxvb3A6IHRydWUsXHJcbiAgICAgICAgZWZmZWN0OiAnZmFkZScsXHJcblxyXG4gICAgICAgIGF1dG9wbGF5OiB7XHJcbiAgICAgICAgICAgIGRlbGF5OiAyNTAwLFxyXG4gICAgICAgICAgICBkaXNhYmxlT25JbnRlcmFjdGlvbjogdHJ1ZSxcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBuYXZpZ2F0aW9uOiB7XHJcbiAgICAgICAgICAgIG5leHRFbDogJy5zd2lwZXItYnV0dG9uLW5leHQnLFxyXG4gICAgICAgICAgICBwcmV2RWw6ICcuc3dpcGVyLWJ1dHRvbi1wcmV2JyxcclxuICAgICAgICB9LFxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gbW9kYWxcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5idG4tbW9kYWwxJykuZm9yRWFjaChlbCA9PiBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9wZW5Nb2RhbCkpXHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnRuLW1vZGFsMicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb3Blbk1vZGFsKVxyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ0bi1tb2RhbDMnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9wZW5Nb2RhbClcclxuXHJcbiAgICBmdW5jdGlvbiBvcGVuTW9kYWwoZXZlbnQpIHtcclxuICAgICAgICBsZXQgYnV0dG9uID0gZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJ2J1dHRvbicpXHJcbiAgICAgICAgbGV0IG1vZGFsXHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKGJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoJ2J0bi1tb2RhbDEnKSkgbW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWwxJylcclxuICAgICAgICBpZiAoYnV0dG9uLmNsYXNzTGlzdC5jb250YWlucygnYnRuLW1vZGFsMicpKSBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbDInKVxyXG4gICAgICAgIGlmIChidXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKCdidG4tbW9kYWwzJykpIG1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsMycpXHJcbiAgICAgICAgXHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QudG9nZ2xlKCdtb2RhbC1hY3RpdmUnKTtcclxuICAgICAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJ1xyXG5cclxuICAgICAgICBtb2RhbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIWV2ZW50LnRhcmdldC5jbG9zZXN0KCcubW9kYWwtY29udGVudCcpKSB7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC50b2dnbGUoJ21vZGFsLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxufVxyXG5cclxuaWYgKGRvY3VtZW50LmJvZHkuZGF0YXNldC5wYWdlICE9PSAnaW5kZXgnKSB7XHJcblxyXG4gICAgLy8gbW9kYWxcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5idG4tbW9kYWwxJykuZm9yRWFjaChlbCA9PiBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9wZW5Nb2RhbCkpXHJcblxyXG4gICAgZnVuY3Rpb24gb3Blbk1vZGFsKGV2ZW50KSB7XHJcbiAgICAgICAgbGV0IGJ1dHRvbiA9IGV2ZW50LnRhcmdldC5jbG9zZXN0KCdidXR0b24nKVxyXG4gICAgICAgIGxldCBtb2RhbFxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChidXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKCdidG4tbW9kYWwxJykpIG1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsMScpXHJcbiAgICAgICAgXHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QudG9nZ2xlKCdtb2RhbC1hY3RpdmUnKTtcclxuICAgICAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJ1xyXG5cclxuICAgICAgICBtb2RhbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIWV2ZW50LnRhcmdldC5jbG9zZXN0KCcubW9kYWwtY29udGVudCcpKSB7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC50b2dnbGUoJ21vZGFsLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxufVxuLyohXG4gKiBAY29weXJpZ2h0IENvcHlyaWdodCAoYykgMjAxNyBJY29Nb29uLmlvXG4gKiBAbGljZW5zZSAgIExpY2Vuc2VkIHVuZGVyIE1JVCBsaWNlbnNlXG4gKiAgICAgICAgICAgIFNlZSBodHRwczovL2dpdGh1Yi5jb20vS2V5YW1vb24vc3ZneHVzZVxuICogQHZlcnNpb24gICAxLjIuNlxuICovXG4vKmpzbGludCBicm93c2VyOiB0cnVlICovXG4vKmdsb2JhbCBYRG9tYWluUmVxdWVzdCwgTXV0YXRpb25PYnNlcnZlciwgd2luZG93ICovXG4oZnVuY3Rpb24gKCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKSB7XG4gICAgICAgIHZhciBjYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7IC8vIGhvbGRzIHhociBvYmplY3RzIHRvIHByZXZlbnQgbXVsdGlwbGUgcmVxdWVzdHNcbiAgICAgICAgdmFyIGNoZWNrVXNlRWxlbXM7XG4gICAgICAgIHZhciB0aWQ7IC8vIHRpbWVvdXQgaWRcbiAgICAgICAgdmFyIGRlYm91bmNlZENoZWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpZCk7XG4gICAgICAgICAgICB0aWQgPSBzZXRUaW1lb3V0KGNoZWNrVXNlRWxlbXMsIDEwMCk7XG4gICAgICAgIH07XG4gICAgICAgIHZhciB1bm9ic2VydmVDaGFuZ2VzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9O1xuICAgICAgICB2YXIgb2JzZXJ2ZUNoYW5nZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgb2JzZXJ2ZXI7XG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCBkZWJvdW5jZWRDaGVjaywgZmFsc2UpO1xuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJvcmllbnRhdGlvbmNoYW5nZVwiLCBkZWJvdW5jZWRDaGVjaywgZmFsc2UpO1xuICAgICAgICAgICAgaWYgKHdpbmRvdy5NdXRhdGlvbk9ic2VydmVyKSB7XG4gICAgICAgICAgICAgICAgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihkZWJvdW5jZWRDaGVjayk7XG4gICAgICAgICAgICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZShkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsIHtcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRMaXN0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBzdWJ0cmVlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiB0cnVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdW5vYnNlcnZlQ2hhbmdlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIGRlYm91bmNlZENoZWNrLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm9yaWVudGF0aW9uY2hhbmdlXCIsIGRlYm91bmNlZENoZWNrLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGlnbm9yZSkge31cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTVN1YnRyZWVNb2RpZmllZFwiLCBkZWJvdW5jZWRDaGVjaywgZmFsc2UpO1xuICAgICAgICAgICAgICAgIHVub2JzZXJ2ZUNoYW5nZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiRE9NU3VidHJlZU1vZGlmaWVkXCIsIGRlYm91bmNlZENoZWNrLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIGRlYm91bmNlZENoZWNrLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwib3JpZW50YXRpb25jaGFuZ2VcIiwgZGVib3VuY2VkQ2hlY2ssIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB2YXIgY3JlYXRlUmVxdWVzdCA9IGZ1bmN0aW9uICh1cmwpIHtcbiAgICAgICAgICAgIC8vIEluIElFIDksIGNyb3NzIG9yaWdpbiByZXF1ZXN0cyBjYW4gb25seSBiZSBzZW50IHVzaW5nIFhEb21haW5SZXF1ZXN0LlxuICAgICAgICAgICAgLy8gWERvbWFpblJlcXVlc3Qgd291bGQgZmFpbCBpZiBDT1JTIGhlYWRlcnMgYXJlIG5vdCBzZXQuXG4gICAgICAgICAgICAvLyBUaGVyZWZvcmUsIFhEb21haW5SZXF1ZXN0IHNob3VsZCBvbmx5IGJlIHVzZWQgd2l0aCBjcm9zcyBvcmlnaW4gcmVxdWVzdHMuXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRPcmlnaW4obG9jKSB7XG4gICAgICAgICAgICAgICAgdmFyIGE7XG4gICAgICAgICAgICAgICAgaWYgKGxvYy5wcm90b2NvbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGEgPSBsb2M7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO1xuICAgICAgICAgICAgICAgICAgICBhLmhyZWYgPSBsb2M7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBhLnByb3RvY29sLnJlcGxhY2UoLzovZywgXCJcIikgKyBhLmhvc3Q7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgUmVxdWVzdDtcbiAgICAgICAgICAgIHZhciBvcmlnaW47XG4gICAgICAgICAgICB2YXIgb3JpZ2luMjtcbiAgICAgICAgICAgIGlmICh3aW5kb3cuWE1MSHR0cFJlcXVlc3QpIHtcbiAgICAgICAgICAgICAgICBSZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgICAgICAgICAgb3JpZ2luID0gZ2V0T3JpZ2luKGxvY2F0aW9uKTtcbiAgICAgICAgICAgICAgICBvcmlnaW4yID0gZ2V0T3JpZ2luKHVybCk7XG4gICAgICAgICAgICAgICAgaWYgKFJlcXVlc3Qud2l0aENyZWRlbnRpYWxzID09PSB1bmRlZmluZWQgJiYgb3JpZ2luMiAhPT0gXCJcIiAmJiBvcmlnaW4yICE9PSBvcmlnaW4pIHtcbiAgICAgICAgICAgICAgICAgICAgUmVxdWVzdCA9IFhEb21haW5SZXF1ZXN0IHx8IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBSZXF1ZXN0ID0gWE1MSHR0cFJlcXVlc3Q7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFJlcXVlc3Q7XG4gICAgICAgIH07XG4gICAgICAgIHZhciB4bGlua05TID0gXCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCI7XG4gICAgICAgIGNoZWNrVXNlRWxlbXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgYmFzZTtcbiAgICAgICAgICAgIHZhciBiY3I7XG4gICAgICAgICAgICB2YXIgZmFsbGJhY2sgPSBcIlwiOyAvLyBvcHRpb25hbCBmYWxsYmFjayBVUkwgaW4gY2FzZSBubyBiYXNlIHBhdGggdG8gU1ZHIGZpbGUgd2FzIGdpdmVuIGFuZCBubyBzeW1ib2wgZGVmaW5pdGlvbiB3YXMgZm91bmQuXG4gICAgICAgICAgICB2YXIgaGFzaDtcbiAgICAgICAgICAgIHZhciBocmVmO1xuICAgICAgICAgICAgdmFyIGk7XG4gICAgICAgICAgICB2YXIgaW5Qcm9ncmVzc0NvdW50ID0gMDtcbiAgICAgICAgICAgIHZhciBpc0hpZGRlbjtcbiAgICAgICAgICAgIHZhciBSZXF1ZXN0O1xuICAgICAgICAgICAgdmFyIHVybDtcbiAgICAgICAgICAgIHZhciB1c2VzO1xuICAgICAgICAgICAgdmFyIHhocjtcbiAgICAgICAgICAgIGZ1bmN0aW9uIG9ic2VydmVJZkRvbmUoKSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgZG9uZSB3aXRoIG1ha2luZyBjaGFuZ2VzLCBzdGFydCB3YXRjaGluZyBmb3IgY2hhZ25lcyBpbiBET00gYWdhaW5cbiAgICAgICAgICAgICAgICBpblByb2dyZXNzQ291bnQgLT0gMTtcbiAgICAgICAgICAgICAgICBpZiAoaW5Qcm9ncmVzc0NvdW50ID09PSAwKSB7IC8vIGlmIGFsbCB4aHJzIHdlcmUgcmVzb2x2ZWRcbiAgICAgICAgICAgICAgICAgICAgdW5vYnNlcnZlQ2hhbmdlcygpOyAvLyBtYWtlIHN1cmUgdG8gcmVtb3ZlIG9sZCBoYW5kbGVyc1xuICAgICAgICAgICAgICAgICAgICBvYnNlcnZlQ2hhbmdlcygpOyAvLyB3YXRjaCBmb3IgY2hhbmdlcyB0byBET01cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmdW5jdGlvbiBhdHRyVXBkYXRlRnVuYyhzcGVjKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNhY2hlW3NwZWMuYmFzZV0gIT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNwZWMudXNlRWwuc2V0QXR0cmlidXRlTlMoeGxpbmtOUywgXCJ4bGluazpocmVmXCIsIFwiI1wiICsgc3BlYy5oYXNoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzcGVjLnVzZUVsLmhhc0F0dHJpYnV0ZShcImhyZWZcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGVjLnVzZUVsLnNldEF0dHJpYnV0ZShcImhyZWZcIiwgXCIjXCIgKyBzcGVjLmhhc2gpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZ1bmN0aW9uIG9ubG9hZEZ1bmMoeGhyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJvZHkgPSBkb2N1bWVudC5ib2R5O1xuICAgICAgICAgICAgICAgICAgICB2YXIgeCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ4XCIpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc3ZnO1xuICAgICAgICAgICAgICAgICAgICB4aHIub25sb2FkID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgeC5pbm5lckhUTUwgPSB4aHIucmVzcG9uc2VUZXh0O1xuICAgICAgICAgICAgICAgICAgICBzdmcgPSB4LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic3ZnXCIpWzBdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3ZnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdmcuc2V0QXR0cmlidXRlKFwiYXJpYS1oaWRkZW5cIiwgXCJ0cnVlXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3ZnLnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3ZnLnN0eWxlLndpZHRoID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN2Zy5zdHlsZS5oZWlnaHQgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3ZnLnN0eWxlLm92ZXJmbG93ID0gXCJoaWRkZW5cIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHkuaW5zZXJ0QmVmb3JlKHN2ZywgYm9keS5maXJzdENoaWxkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBvYnNlcnZlSWZEb25lKCk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZ1bmN0aW9uIG9uRXJyb3JUaW1lb3V0KHhocikge1xuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHhoci5vbmVycm9yID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgeGhyLm9udGltZW91dCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIG9ic2VydmVJZkRvbmUoKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdW5vYnNlcnZlQ2hhbmdlcygpOyAvLyBzdG9wIHdhdGNoaW5nIGZvciBjaGFuZ2VzIHRvIERPTVxuICAgICAgICAgICAgLy8gZmluZCBhbGwgdXNlIGVsZW1lbnRzXG4gICAgICAgICAgICB1c2VzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJ1c2VcIik7XG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdXNlcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGJjciA9IHVzZXNbaV0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoaWdub3JlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGZhaWxlZCB0byBnZXQgYm91bmRpbmcgcmVjdGFuZ2xlIG9mIHRoZSB1c2UgZWxlbWVudFxuICAgICAgICAgICAgICAgICAgICBiY3IgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaHJlZiA9IHVzZXNbaV0uZ2V0QXR0cmlidXRlKFwiaHJlZlwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgfHwgdXNlc1tpXS5nZXRBdHRyaWJ1dGVOUyh4bGlua05TLCBcImhyZWZcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHx8IHVzZXNbaV0uZ2V0QXR0cmlidXRlKFwieGxpbms6aHJlZlwiKTtcbiAgICAgICAgICAgICAgICBpZiAoaHJlZiAmJiBocmVmLnNwbGl0KSB7XG4gICAgICAgICAgICAgICAgICAgIHVybCA9IGhyZWYuc3BsaXQoXCIjXCIpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHVybCA9IFtcIlwiLCBcIlwiXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYmFzZSA9IHVybFswXTtcbiAgICAgICAgICAgICAgICBoYXNoID0gdXJsWzFdO1xuICAgICAgICAgICAgICAgIGlzSGlkZGVuID0gYmNyICYmIGJjci5sZWZ0ID09PSAwICYmIGJjci5yaWdodCA9PT0gMCAmJiBiY3IudG9wID09PSAwICYmIGJjci5ib3R0b20gPT09IDA7XG4gICAgICAgICAgICAgICAgaWYgKGJjciAmJiBiY3Iud2lkdGggPT09IDAgJiYgYmNyLmhlaWdodCA9PT0gMCAmJiAhaXNIaWRkZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHVzZSBlbGVtZW50IGlzIGVtcHR5XG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHRoZXJlIGlzIGEgcmVmZXJlbmNlIHRvIGFuIGV4dGVybmFsIFNWRywgdHJ5IHRvIGZldGNoIGl0XG4gICAgICAgICAgICAgICAgICAgIC8vIHVzZSB0aGUgb3B0aW9uYWwgZmFsbGJhY2sgVVJMIGlmIHRoZXJlIGlzIG5vIHJlZmVyZW5jZSB0byBhbiBleHRlcm5hbCBTVkdcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZhbGxiYWNrICYmICFiYXNlLmxlbmd0aCAmJiBoYXNoICYmICFkb2N1bWVudC5nZXRFbGVtZW50QnlJZChoYXNoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZSA9IGZhbGxiYWNrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh1c2VzW2ldLmhhc0F0dHJpYnV0ZShcImhyZWZcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXNbaV0uc2V0QXR0cmlidXRlTlMoeGxpbmtOUywgXCJ4bGluazpocmVmXCIsIGhyZWYpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChiYXNlLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2NoZWR1bGUgdXBkYXRpbmcgeGxpbms6aHJlZlxuICAgICAgICAgICAgICAgICAgICAgICAgeGhyID0gY2FjaGVbYmFzZV07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoeGhyICE9PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdHJ1ZSBzaWduaWZpZXMgdGhhdCBwcmVwZW5kaW5nIHRoZSBTVkcgd2FzIG5vdCByZXF1aXJlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoYXR0clVwZGF0ZUZ1bmMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VFbDogdXNlc1tpXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZTogYmFzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzaDogaGFzaFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh4aHIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlcXVlc3QgPSBjcmVhdGVSZXF1ZXN0KGJhc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChSZXF1ZXN0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeGhyID0gbmV3IFJlcXVlc3QoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVbYmFzZV0gPSB4aHI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHhoci5vbmxvYWQgPSBvbmxvYWRGdW5jKHhocik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHhoci5vbmVycm9yID0gb25FcnJvclRpbWVvdXQoeGhyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeGhyLm9udGltZW91dCA9IG9uRXJyb3JUaW1lb3V0KHhocik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHhoci5vcGVuKFwiR0VUXCIsIGJhc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4aHIuc2VuZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpblByb2dyZXNzQ291bnQgKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzSGlkZGVuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FjaGVbYmFzZV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbWVtYmVyIHRoaXMgVVJMIGlmIHRoZSB1c2UgZWxlbWVudCB3YXMgbm90IGVtcHR5IGFuZCBubyByZXF1ZXN0IHdhcyBzZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVbYmFzZV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjYWNoZVtiYXNlXS5vbmxvYWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBpdCB0dXJucyBvdXQgdGhhdCBwcmVwZW5kaW5nIHRoZSBTVkcgaXMgbm90IG5lY2Vzc2FyeSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhYm9ydCB0aGUgaW4tcHJvZ3Jlc3MgeGhyLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlW2Jhc2VdLmFib3J0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGNhY2hlW2Jhc2VdLm9ubG9hZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWNoZVtiYXNlXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYmFzZS5sZW5ndGggJiYgY2FjaGVbYmFzZV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoYXR0clVwZGF0ZUZ1bmMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZUVsOiB1c2VzW2ldLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2U6IGJhc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzaDogaGFzaFxuICAgICAgICAgICAgICAgICAgICAgICAgfSksIDApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdXNlcyA9IFwiXCI7XG4gICAgICAgICAgICBpblByb2dyZXNzQ291bnQgKz0gMTtcbiAgICAgICAgICAgIG9ic2VydmVJZkRvbmUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIHdpbkxvYWQ7XG4gICAgICAgIHdpbkxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgd2luTG9hZCwgZmFsc2UpOyAvLyB0byBwcmV2ZW50IG1lbW9yeSBsZWFrc1xuICAgICAgICAgICAgdGlkID0gc2V0VGltZW91dChjaGVja1VzZUVsZW1zLCAwKTtcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgIT09IFwiY29tcGxldGVcIikge1xuICAgICAgICAgICAgLy8gVGhlIGxvYWQgZXZlbnQgZmlyZXMgd2hlbiBhbGwgcmVzb3VyY2VzIGhhdmUgZmluaXNoZWQgbG9hZGluZywgd2hpY2ggYWxsb3dzIGRldGVjdGluZyB3aGV0aGVyIFNWRyB1c2UgZWxlbWVudHMgYXJlIGVtcHR5LlxuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIHdpbkxvYWQsIGZhbHNlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIE5vIG5lZWQgdG8gYWRkIGEgbGlzdGVuZXIgaWYgdGhlIGRvY3VtZW50IGlzIGFscmVhZHkgbG9hZGVkLCBpbml0aWFsaXplIGltbWVkaWF0ZWx5LlxuICAgICAgICAgICAgd2luTG9hZCgpO1xuICAgICAgICB9XG4gICAgfVxufSgpKTtcbiJdfQ==
