"use strict";function _createForOfIteratorHelper(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw o}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var $navIcon=document.querySelector(".nav__menu-icon");$navIcon.addEventListener("click",(function(){document.body.classList.toggle("menu-active")}));var mobile=window.matchMedia("(max-width: 767.9px)"),laptop=window.matchMedia("(min-width: 768px) and (max-width: 1250px)"),desktop=window.matchMedia("(min-width: 1251px)");if("make-page"===document.body.dataset.page){document.querySelector(".maker").querySelector(".maker__body").addEventListener("click",updatePizza);var $pizzaContainer=document.querySelector(".maker-pizza-bg"),pizzaLayers=2,pizzaTemp=[],images={"Красный":"Красный.png","Белый":"Белый.png","Цезарь":"Белый.png","Барбекю":"Красный.png","Томат":"Томат.png","Ананас":"Ананас.png","Маслины":"Маслины.png","Корнишоны":"Корнишоны.png","Салат":"Салат.png","Халапеньо":"Халапеньо.png","Перец":"Перец.png","Шампиньоны":"Шампиньоны.png","Лук":"Лук.png","Филе":"Филе.png","Фарш":"Фарш.png","Охотничьи":"Охотничьи.png","Копченый":"Копченый.png","Ветчина":"Ветчина.png","Бекон":"Бекон.png","Пепперони":"Пепперони.png","Креветки":"Креветки.png","Лосось":"Лосось.png","Мидии":"Фарш.png","Салями":"Салями.png","Моцарелла":"Моцарелла.png","Пармезан":"Пармезан.png"};function updatePizza(e){var t=e.target.closest(".maker-row__product").querySelector("span"),n=e.target.closest(".maker-row__product").dataset.type,r=document.createElement("div");for(var a in images)if(n===a)if(pizzaTemp.includes(a)){t.style.display="none";var o=$pizzaContainer.querySelector("[data-bg=".concat(a,"]"));$pizzaContainer.removeChild(o),pizzaTemp.splice(pizzaTemp.indexOf(n),1)}else t.style.display="block",r.setAttribute("data-bg",n),r.style.backgroundImage="url('./assets/img/".concat(images[a],"')"),r.style.zIndex=pizzaLayers,$pizzaContainer.appendChild(r),pizzaTemp.push(a);pizzaLayers++}function clearPizza(){document.querySelector(".maker").querySelectorAll(".maker-row__product").forEach((function(e){return e.querySelector("span").style.display="none"})),$pizzaContainer.innerHTML="",pizzaLayers=2,pizzaTemp=[]}document.querySelectorAll(".pizza-new").forEach((function(e){return e.addEventListener("click",clearPizza)}))}if("half-page"===document.body.dataset.page){var _step,accordions=document.querySelectorAll(".accordion"),_iterator=_createForOfIteratorHelper(accordions);try{var _loop=function(){var e,t=_step.value.querySelectorAll(".accordion__panel"),n=_createForOfIteratorHelper(t);try{var r=function(){var n=e.value;n.querySelector(".accordion__header").addEventListener("click",(function(){var e,r=_createForOfIteratorHelper(t);try{for(r.s();!(e=r.n()).done;){var a=e.value;a!==n&&a.classList.remove("accordion__expanded")}}catch(e){r.e(e)}finally{r.f()}n.classList.toggle("accordion__expanded")}))};for(n.s();!(e=n.n()).done;)r()}catch(e){n.e(e)}finally{n.f()}};for(_iterator.s();!(_step=_iterator.n()).done;)_loop()}catch(e){_iterator.e(e)}finally{_iterator.f()}document.querySelector(".half").querySelector(".maker__body").addEventListener("click",updateHalf);var warning=document.querySelector(".half").querySelectorAll(".half__warning"),$halfContainer=document.querySelector(".half-pizza-bg"),halfTemp=[],firstHalf=["1","2","3","4","5","6","7","8","9","10","11","12"],secondHalf=["13","14","15","16","17","18","19","20","21","22","23","24"],imagesHalf={1:"Адриано-Итальяно.png",2:"Сырная-Банда.png",3:"Томатный-Цыпленок.png",4:"Цезарь.png",5:"Ананасовый-Экспресс.png",6:"Болгарский-Перец.png",7:"Грибная-Цыпа.png",8:"Джони-Пеперони.png",9:"Дочь-Мясника.png",10:"Марго-Рита.png",11:"Пивная.png",12:"Подводная-Братва.png",13:"Адриано-Итальяно.png",14:"Сырная-Банда.png",15:"Томатный-Цыпленок.png",16:"Цезарь.png",17:"Ананасовый-Экспресс.png",18:"Болгарский-Перец.png",19:"Грибная-Цыпа.png",20:"Джони-Пеперони.png",21:"Дочь-Мясника.png",22:"Марго-Рита.png",23:"Пивная.png",24:"Подводная-Братва.png"};function updateHalf(e){var t=e.target.closest(".maker-row__product").querySelector("span"),n=e.target.closest(".maker-row__product").dataset.number;if(halfTemp.includes(n)){t.removeAttribute("style");var r=$halfContainer.querySelector('[data-halfbg="'.concat(n,'"]'));$halfContainer.removeChild(r),halfTemp.splice(halfTemp.indexOf(n),1)}else(0===halfTemp.length||1===halfTemp.length&&(firstHalf.includes(n)&&!firstHalf.includes(halfTemp[0])||secondHalf.includes(n)&&!secondHalf.includes(halfTemp[0])))&&a();function a(){halfTemp.push(n),t.style.display="block";var e=document.createElement("div");for(var r in imagesHalf)n===r&&(firstHalf.includes(n)?(desktop.matches&&e.classList.add("half-left-desktop"),laptop.matches&&e.classList.add("half-left-laptop"),mobile.matches&&e.classList.add("half-left-mobile")):secondHalf.includes(n)&&(desktop.matches&&e.classList.add("half-right-desktop"),laptop.matches&&e.classList.add("half-right-laptop"),mobile.matches&&e.classList.add("half-right-mobile")),e.setAttribute("data-halfbg",n),e.style.backgroundImage="url('./assets/img/".concat(imagesHalf[r],"')"),$halfContainer.appendChild(e))}2===halfTemp.length&&(warning.forEach((function(e){return e.style.display="none"})),desktop.matches&&(document.querySelector(".half").querySelector(".maker__body").style.marginTop="80px"),laptop.matches&&(document.querySelector(".half").querySelector(".maker-text__control").style.marginTop="30px")),halfTemp.length<2&&clearStyles()}function clearHalf(){document.querySelector(".half").querySelectorAll(".maker-row__product").forEach((function(e){e.querySelector("span").hasAttribute("style")&&e.querySelector("span").removeAttribute("style")})),halfTemp=[],$halfContainer.innerHTML="",clearStyles()}function clearStyles(){desktop.matches&&(document.querySelector(".warning__desktop").style.display="flex"),laptop.matches&&(document.querySelector(".warning__laptop").style.display="flex"),document.querySelector(".half").querySelector(".maker__body").style.marginTop="0",desktop.matches&&(document.querySelector(".half").querySelector(".maker__body").style.marginTop="0"),laptop.matches&&(document.querySelector(".half").querySelector(".maker-text__control").style.marginTop="0")}document.querySelectorAll(".half-new").forEach((function(e){return e.addEventListener("click",clearHalf)}))}
/*!
 * @copyright Copyright (c) 2017 IcoMoon.io
 * @license   Licensed under MIT license
 *            See https://github.com/Keyamoon/svgxuse
 * @version   1.2.6
 */!function(){if("undefined"!=typeof window&&window.addEventListener){var e,t,n,r=Object.create(null),a=function(){clearTimeout(t),t=setTimeout(e,100)},o=function(){},i=function(e){function t(e){var t;return void 0!==e.protocol?t=e:(t=document.createElement("a")).href=e,t.protocol.replace(/:/g,"")+t.host}var n,r,a;return window.XMLHttpRequest&&(n=new XMLHttpRequest,r=t(location),a=t(e),n=void 0===n.withCredentials&&""!==a&&a!==r?XDomainRequest||void 0:XMLHttpRequest),n},l="http://www.w3.org/1999/xlink";e=function(){var e,t,n,c,s,u,d,p,f,m,h=0;function g(){var e;0===(h-=1)&&(o(),window.addEventListener("resize",a,!1),window.addEventListener("orientationchange",a,!1),window.MutationObserver?((e=new MutationObserver(a)).observe(document.documentElement,{childList:!0,subtree:!0,attributes:!0}),o=function(){try{e.disconnect(),window.removeEventListener("resize",a,!1),window.removeEventListener("orientationchange",a,!1)}catch(e){}}):(document.documentElement.addEventListener("DOMSubtreeModified",a,!1),o=function(){document.documentElement.removeEventListener("DOMSubtreeModified",a,!1),window.removeEventListener("resize",a,!1),window.removeEventListener("orientationchange",a,!1)}))}function y(e){return function(){!0!==r[e.base]&&(e.useEl.setAttributeNS(l,"xlink:href","#"+e.hash),e.useEl.hasAttribute("href")&&e.useEl.setAttribute("href","#"+e.hash))}}function v(e){return function(){var t,n=document.body,r=document.createElement("x");e.onload=null,r.innerHTML=e.responseText,(t=r.getElementsByTagName("svg")[0])&&(t.setAttribute("aria-hidden","true"),t.style.position="absolute",t.style.width=0,t.style.height=0,t.style.overflow="hidden",n.insertBefore(t,n.firstChild)),g()}}function b(e){return function(){e.onerror=null,e.ontimeout=null,g()}}for(o(),f=document.getElementsByTagName("use"),s=0;s<f.length;s+=1){try{t=f[s].getBoundingClientRect()}catch(e){t=!1}e=(p=(c=f[s].getAttribute("href")||f[s].getAttributeNS(l,"href")||f[s].getAttribute("xlink:href"))&&c.split?c.split("#"):["",""])[0],n=p[1],u=t&&0===t.left&&0===t.right&&0===t.top&&0===t.bottom,t&&0===t.width&&0===t.height&&!u?(f[s].hasAttribute("href")&&f[s].setAttributeNS(l,"xlink:href",c),e.length&&(!0!==(m=r[e])&&setTimeout(y({useEl:f[s],base:e,hash:n}),0),void 0===m&&void 0!==(d=i(e))&&(m=new d,r[e]=m,m.onload=v(m),m.onerror=b(m),m.ontimeout=b(m),m.open("GET",e),m.send(),h+=1))):u?e.length&&r[e]&&setTimeout(y({useEl:f[s],base:e,hash:n}),0):void 0===r[e]?r[e]=!0:r[e].onload&&(r[e].abort(),delete r[e].onload,r[e]=!0)}f="",h+=1,g()},n=function(){window.removeEventListener("load",n,!1),t=setTimeout(e,0)},"complete"!==document.readyState?window.addEventListener("load",n,!1):n()}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdHMuanMiXSwibmFtZXMiOlsiX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIiLCJvIiwiYWxsb3dBcnJheUxpa2UiLCJpdCIsIlN5bWJvbCIsIml0ZXJhdG9yIiwiQXJyYXkiLCJpc0FycmF5IiwiX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5IiwibGVuZ3RoIiwiaSIsIkYiLCJzIiwibiIsImRvbmUiLCJ2YWx1ZSIsImUiLCJfZSIsImYiLCJUeXBlRXJyb3IiLCJlcnIiLCJub3JtYWxDb21wbGV0aW9uIiwiZGlkRXJyIiwic3RlcCIsIm5leHQiLCJfZTIiLCJyZXR1cm4iLCJtaW5MZW4iLCJfYXJyYXlMaWtlVG9BcnJheSIsIk9iamVjdCIsInByb3RvdHlwZSIsInRvU3RyaW5nIiwiY2FsbCIsInNsaWNlIiwiY29uc3RydWN0b3IiLCJuYW1lIiwiZnJvbSIsInRlc3QiLCJhcnIiLCJsZW4iLCJhcnIyIiwiJG5hdkljb24iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJhZGRFdmVudExpc3RlbmVyIiwiYm9keSIsImNsYXNzTGlzdCIsInRvZ2dsZSIsIm1vYmlsZSIsIndpbmRvdyIsIm1hdGNoTWVkaWEiLCJsYXB0b3AiLCJkZXNrdG9wIiwiZGF0YXNldCIsInBhZ2UiLCJ1cGRhdGVQaXp6YSIsIiRwaXp6YUNvbnRhaW5lciIsInBpenphTGF5ZXJzIiwicGl6emFUZW1wIiwiaW1hZ2VzIiwi0JrRgNCw0YHQvdGL0LkiLCLQkdC10LvRi9C5Iiwi0KbQtdC30LDRgNGMIiwi0JHQsNGA0LHQtdC60Y4iLCLQotC+0LzQsNGCIiwi0JDQvdCw0L3QsNGBIiwi0JzQsNGB0LvQuNC90YsiLCLQmtC+0YDQvdC40YjQvtC90YsiLCLQodCw0LvQsNGCIiwi0KXQsNC70LDQv9C10L3RjNC+Iiwi0J/QtdGA0LXRhiIsItCo0LDQvNC/0LjQvdGM0L7QvdGLIiwi0JvRg9C6Iiwi0KTQuNC70LUiLCLQpNCw0YDRiCIsItCe0YXQvtGC0L3QuNGH0YzQuCIsItCa0L7Qv9GH0LXQvdGL0LkiLCLQktC10YLRh9C40L3QsCIsItCR0LXQutC+0L0iLCLQn9C10L/Qv9C10YDQvtC90LgiLCLQmtGA0LXQstC10YLQutC4Iiwi0JvQvtGB0L7RgdGMIiwi0JzQuNC00LjQuCIsItCh0LDQu9GP0LzQuCIsItCc0L7RhtCw0YDQtdC70LvQsCIsItCf0LDRgNC80LXQt9Cw0L0iLCJldmVudCIsIiRwaXp6YVNwYW4iLCJ0YXJnZXQiLCJjbG9zZXN0IiwiJHBpenphVHlwZSIsInR5cGUiLCJkaXYiLCJjcmVhdGVFbGVtZW50Iiwia2V5IiwiaW5jbHVkZXMiLCJzdHlsZSIsImRpc3BsYXkiLCJyZW1vdmUiLCJjb25jYXQiLCJyZW1vdmVDaGlsZCIsInNwbGljZSIsImluZGV4T2YiLCJzZXRBdHRyaWJ1dGUiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJ6SW5kZXgiLCJhcHBlbmRDaGlsZCIsInB1c2giLCJjbGVhclBpenphIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJlbCIsImlubmVySFRNTCIsIl9zdGVwIiwiYWNjb3JkaW9ucyIsIl9pdGVyYXRvciIsIl9sb29wIiwiX3N0ZXAyIiwicGFuZWxzIiwiX2l0ZXJhdG9yMiIsIl9sb29wMiIsInBhbmVsIiwiX3N0ZXAzIiwiX2l0ZXJhdG9yMyIsIm90aGVyUGFuZWwiLCJ1cGRhdGVIYWxmIiwid2FybmluZyIsIiRoYWxmQ29udGFpbmVyIiwiaGFsZlRlbXAiLCJmaXJzdEhhbGYiLCJzZWNvbmRIYWxmIiwiaW1hZ2VzSGFsZiIsIjEiLCIyIiwiMyIsIjQiLCI1IiwiNiIsIjciLCI4IiwiOSIsIjEwIiwiMTEiLCIxMiIsIjEzIiwiMTQiLCIxNSIsIjE2IiwiMTciLCIxOCIsIjE5IiwiMjAiLCIyMSIsIjIyIiwiMjMiLCIyNCIsIiRoYWxmU3BhbiIsIiRoYWxmTnVtIiwibnVtYmVyIiwicmVtb3ZlQXR0cmlidXRlIiwicHVzaEhhbGYiLCJtYXRjaGVzIiwiYWRkIiwibWFyZ2luVG9wIiwiY2xlYXJTdHlsZXMiLCJjbGVhckhhbGYiLCJoYXNBdHRyaWJ1dGUiLCJjaGVja1VzZUVsZW1zIiwidGlkIiwid2luTG9hZCIsImNhY2hlIiwiY3JlYXRlIiwiZGVib3VuY2VkQ2hlY2siLCJjbGVhclRpbWVvdXQiLCJzZXRUaW1lb3V0IiwidW5vYnNlcnZlQ2hhbmdlcyIsImNyZWF0ZVJlcXVlc3QiLCJ1cmwiLCJnZXRPcmlnaW4iLCJsb2MiLCJhIiwidW5kZWZpbmVkIiwicHJvdG9jb2wiLCJocmVmIiwicmVwbGFjZSIsImhvc3QiLCJSZXF1ZXN0Iiwib3JpZ2luIiwib3JpZ2luMiIsIlhNTEh0dHBSZXF1ZXN0IiwibG9jYXRpb24iLCJ3aXRoQ3JlZGVudGlhbHMiLCJYRG9tYWluUmVxdWVzdCIsInhsaW5rTlMiLCJiYXNlIiwiYmNyIiwiaGFzaCIsImlzSGlkZGVuIiwidXNlcyIsInhociIsImluUHJvZ3Jlc3NDb3VudCIsIm9ic2VydmVJZkRvbmUiLCJvYnNlcnZlciIsIk11dGF0aW9uT2JzZXJ2ZXIiLCJvYnNlcnZlIiwiZG9jdW1lbnRFbGVtZW50IiwiY2hpbGRMaXN0Iiwic3VidHJlZSIsImF0dHJpYnV0ZXMiLCJkaXNjb25uZWN0IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImlnbm9yZSIsImF0dHJVcGRhdGVGdW5jIiwic3BlYyIsInVzZUVsIiwic2V0QXR0cmlidXRlTlMiLCJvbmxvYWRGdW5jIiwic3ZnIiwieCIsIm9ubG9hZCIsInJlc3BvbnNlVGV4dCIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwicG9zaXRpb24iLCJ3aWR0aCIsImhlaWdodCIsIm92ZXJmbG93IiwiaW5zZXJ0QmVmb3JlIiwiZmlyc3RDaGlsZCIsIm9uRXJyb3JUaW1lb3V0Iiwib25lcnJvciIsIm9udGltZW91dCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImdldEF0dHJpYnV0ZSIsImdldEF0dHJpYnV0ZU5TIiwic3BsaXQiLCJsZWZ0IiwicmlnaHQiLCJ0b3AiLCJib3R0b20iLCJvcGVuIiwic2VuZCIsImFib3J0IiwicmVhZHlTdGF0ZSJdLCJtYXBwaW5ncyI6IkFBQUEsYUFFQSxTQUFTQSwyQkFBMkJDLEVBQUdDLEdBQWtCLElBQUlDLEVBQUksR0FBc0Isb0JBQVhDLFFBQWdELE1BQXRCSCxFQUFFRyxPQUFPQyxVQUFtQixDQUFFLEdBQUlDLE1BQU1DLFFBQVFOLEtBQU9FLEVBQUtLLDRCQUE0QlAsS0FBT0MsR0FBa0JELEdBQXlCLGlCQUFiQSxFQUFFUSxPQUFxQixDQUFNTixJQUFJRixFQUFJRSxHQUFJLElBQUlPLEVBQUksRUFBT0MsRUFBSSxhQUFpQixNQUFPLENBQUVDLEVBQUdELEVBQUdFLEVBQUcsV0FBZSxPQUFJSCxHQUFLVCxFQUFFUSxPQUFlLENBQUVLLE1BQU0sR0FBZSxDQUFFQSxNQUFNLEVBQU9DLE1BQU9kLEVBQUVTLE9BQVdNLEVBQUcsU0FBV0MsR0FBTSxNQUFNQSxHQUFPQyxFQUFHUCxHQUFPLE1BQU0sSUFBSVEsVUFBVSx5SUFBNEksSUFBNkNDLEVBQXpDQyxHQUFtQixFQUFNQyxHQUFTLEVBQVksTUFBTyxDQUFFVixFQUFHLFdBQWVULEVBQUtGLEVBQUVHLE9BQU9DLGFBQWdCUSxFQUFHLFdBQWUsSUFBSVUsRUFBT3BCLEVBQUdxQixPQUFzQyxPQUE5QkgsRUFBbUJFLEVBQUtULEtBQWFTLEdBQVNQLEVBQUcsU0FBV1MsR0FBT0gsR0FBUyxFQUFNRixFQUFNSyxHQUFRUCxFQUFHLFdBQWUsSUFBV0csR0FBaUMsTUFBYmxCLEVBQUd1QixRQUFnQnZCLEVBQUd1QixTQUFZLFFBQVUsR0FBSUosRUFBUSxNQUFNRixLQUVsOUIsU0FBU1osNEJBQTRCUCxFQUFHMEIsR0FBVSxHQUFLMUIsRUFBTCxDQUFnQixHQUFpQixpQkFBTkEsRUFBZ0IsT0FBTzJCLGtCQUFrQjNCLEVBQUcwQixHQUFTLElBQUlkLEVBQUlnQixPQUFPQyxVQUFVQyxTQUFTQyxLQUFLL0IsR0FBR2dDLE1BQU0sR0FBSSxHQUFpRSxNQUFuRCxXQUFOcEIsR0FBa0JaLEVBQUVpQyxjQUFhckIsRUFBSVosRUFBRWlDLFlBQVlDLE1BQWdCLFFBQU50QixHQUFxQixRQUFOQSxFQUFvQlAsTUFBTThCLEtBQUtuQyxHQUFjLGNBQU5ZLEdBQXFCLDJDQUEyQ3dCLEtBQUt4QixHQUFXZSxrQkFBa0IzQixFQUFHMEIsUUFBekcsR0FFN1MsU0FBU0Msa0JBQWtCVSxFQUFLQyxJQUFrQixNQUFQQSxHQUFlQSxFQUFNRCxFQUFJN0IsVUFBUThCLEVBQU1ELEVBQUk3QixRQUFRLElBQUssSUFBSUMsRUFBSSxFQUFHOEIsRUFBTyxJQUFJbEMsTUFBTWlDLEdBQU03QixFQUFJNkIsRUFBSzdCLElBQU84QixFQUFLOUIsR0FBSzRCLEVBQUk1QixHQUFNLE9BQU84QixFQUxoTCxJQUFJQyxTQUFXQyxTQUFTQyxjQUFjLG1CQUV0Q0YsU0FBU0csaUJBQWlCLFNBQVMsV0FDL0JGLFNBQVNHLEtBQUtDLFVBQVVDLE9BQU8sa0JBR25DLElBQU1DLE9BQVNDLE9BQU9DLFdBQVcsd0JBQzNCQyxPQUFTRixPQUFPQyxXQUFXLDhDQUMzQkUsUUFBVUgsT0FBT0MsV0FBVyx1QkFJbEMsR0FBbUMsY0FBL0JSLFNBQVNHLEtBQUtRLFFBQVFDLEtBQXNCLENBRTVDWixTQUFTQyxjQUFjLFVBQVVBLGNBQWMsZ0JBQWdCQyxpQkFBaUIsUUFBU1csYUFFekYsSUFBTUMsZ0JBQWtCZCxTQUFTQyxjQUFjLG1CQUUzQ2MsWUFBYyxFQUNkQyxVQUFZLEdBRVZDLE9BQVMsQ0FDWEMsVUFBVyxjQUNYQyxRQUFTLFlBQ1RDLFNBQVUsWUFDVkMsVUFBVyxjQUNYQyxRQUFTLFlBQ1RDLFNBQVUsYUFDVkMsVUFBVyxjQUNYQyxZQUFhLGdCQUNiQyxRQUFTLFlBQ1RDLFlBQWEsZ0JBQ2JDLFFBQVMsWUFDVEMsYUFBYyxpQkFDZEMsTUFBTyxVQUNQQyxPQUFRLFdBQ1JDLE9BQVEsV0FDUkMsWUFBYSxnQkFDYkMsV0FBWSxlQUNaQyxVQUFXLGNBQ1hDLFFBQVMsWUFDVEMsWUFBYSxnQkFDYkMsV0FBWSxlQUNaQyxTQUFVLGFBQ1ZDLFFBQVMsV0FDVEMsU0FBVSxhQUNWQyxZQUFhLGdCQUNiQyxXQUFZLGdCQUdoQixTQUFTOUIsWUFBWStCLEdBQ2pCLElBQUlDLEVBQWFELEVBQU1FLE9BQU9DLFFBQVEsdUJBQXVCOUMsY0FBYyxRQUN2RStDLEVBQWFKLEVBQU1FLE9BQU9DLFFBQVEsdUJBQXVCcEMsUUFBUXNDLEtBQ2pFQyxFQUFNbEQsU0FBU21ELGNBQWMsT0FFakMsSUFBSyxJQUFNQyxLQUFPbkMsT0FFZCxHQUFJK0IsSUFBZUksRUFFZixHQUFJcEMsVUFBVXFDLFNBQVNELEdBQU0sQ0FDekJQLEVBQVdTLE1BQU1DLFFBQVUsT0FDM0IsSUFBSUMsRUFBUzFDLGdCQUFnQmIsY0FBaEIsWUFBQXdELE9BQTBDTCxFQUExQyxNQUNidEMsZ0JBQWdCNEMsWUFBWUYsR0FDNUJ4QyxVQUFVMkMsT0FBTzNDLFVBQVU0QyxRQUFRWixHQUFhLFFBR2hESCxFQUFXUyxNQUFNQyxRQUFVLFFBQzNCTCxFQUFJVyxhQUFhLFVBQVdiLEdBQzVCRSxFQUFJSSxNQUFNUSxnQkFBVixxQkFBQUwsT0FBaUR4QyxPQUFPbUMsR0FBeEQsTUFDQUYsRUFBSUksTUFBTVMsT0FBU2hELFlBQ25CRCxnQkFBZ0JrRCxZQUFZZCxHQUM1QmxDLFVBQVVpRCxLQUFLYixHQUkzQnJDLGNBTUosU0FBU21ELGFBQ0xsRSxTQUFTQyxjQUFjLFVBQVVrRSxpQkFBaUIsdUJBQXVCQyxTQUFRLFNBQUFDLEdBQUUsT0FBSUEsRUFBR3BFLGNBQWMsUUFBUXFELE1BQU1DLFFBQVUsVUFDaEl6QyxnQkFBZ0J3RCxVQUFZLEdBQzVCdkQsWUFBYyxFQUNkQyxVQUFZLEdBTmhCaEIsU0FBU21FLGlCQUFpQixjQUFjQyxTQUFRLFNBQUFDLEdBQUUsT0FBSUEsRUFBR25FLGlCQUFpQixRQUFTZ0UsZUFZdkYsR0FBbUMsY0FBL0JsRSxTQUFTRyxLQUFLUSxRQUFRQyxLQUFzQixDQUU1QyxJQUY0QzJELE1BRXRDQyxXQUFheEUsU0FBU21FLGlCQUFpQixjQUZETSxVQUFBbkgsMkJBR3BCa0gsWUFIb0IsSUFBQSxJQUFBRSxNQUFBLFdBQUEsSUFBQUMsRUFJbENDLEVBSmtDTCxNQUFBbEcsTUFJZjhGLGlCQUFpQixxQkFKRlUsRUFBQXZILDJCQUtwQnNILEdBTG9CLElBQUEsSUFBQUUsRUFBQSxXQUFBLElBSzdCQyxFQUw2QkosRUFBQXRHLE1BTXZCMEcsRUFBTTlFLGNBQWMsc0JBQzVCQyxpQkFBaUIsU0FBUyxXQUFNLElBQUE4RSxFQUFBQyxFQUFBM0gsMkJBQ1JzSCxHQURRLElBQ2pDLElBQUFLLEVBQUEvRyxNQUFBOEcsRUFBQUMsRUFBQTlHLEtBQUFDLE1BQWlDLENBQUEsSUFBdEI4RyxFQUFzQkYsRUFBQTNHLE1BQ3pCNkcsSUFBZUgsR0FDZkcsRUFBVzlFLFVBQVVvRCxPQUFPLHdCQUhILE1BQUE5RSxHQUFBdUcsRUFBQTNHLEVBQUFJLEdBQUEsUUFBQXVHLEVBQUF6RyxJQU1yQ3VHLEVBQU0zRSxVQUFVQyxPQUFPLDJCQVIzQixJQUFBd0UsRUFBQTNHLE1BQUF5RyxFQUFBRSxFQUFBMUcsS0FBQUMsTUFBNEIwRyxJQUxZLE1BQUFwRyxHQUFBbUcsRUFBQXZHLEVBQUFJLEdBQUEsUUFBQW1HLEVBQUFyRyxNQUc1QyxJQUFBaUcsVUFBQXZHLE1BQUFxRyxNQUFBRSxVQUFBdEcsS0FBQUMsTUFBb0NzRyxRQUhRLE1BQUFoRyxHQUFBK0YsVUFBQW5HLEVBQUFJLEdBQUEsUUFBQStGLFVBQUFqRyxJQW1CNUN3QixTQUFTQyxjQUFjLFNBQVNBLGNBQWMsZ0JBQWdCQyxpQkFBaUIsUUFBU2lGLFlBQ3hGLElBQU1DLFFBQVVwRixTQUFTQyxjQUFjLFNBQVNrRSxpQkFBaUIsa0JBRTNEa0IsZUFBaUJyRixTQUFTQyxjQUFjLGtCQUUxQ3FGLFNBQVcsR0FDVEMsVUFBWSxDQUFDLElBQUksSUFBSSxJQUFJLElBQUksSUFBSSxJQUFJLElBQUksSUFBSSxJQUFJLEtBQUssS0FBSyxNQUMzREMsV0FBYSxDQUFDLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxNQUVyRUMsV0FBYSxDQUNmQyxFQUFLLHVCQUNMQyxFQUFLLG1CQUNMQyxFQUFLLHdCQUNMQyxFQUFLLGFBQ0xDLEVBQUssMEJBQ0xDLEVBQUssdUJBQ0xDLEVBQUssbUJBQ0xDLEVBQUsscUJBQ0xDLEVBQUssbUJBQ0xDLEdBQU0saUJBQ05DLEdBQU0sYUFDTkMsR0FBTSx1QkFDTkMsR0FBTSx1QkFDTkMsR0FBTSxtQkFDTkMsR0FBTSx3QkFDTkMsR0FBTSxhQUNOQyxHQUFNLDBCQUNOQyxHQUFNLHVCQUNOQyxHQUFNLG1CQUNOQyxHQUFNLHFCQUNOQyxHQUFNLG1CQUNOQyxHQUFNLGlCQUNOQyxHQUFNLGFBQ05DLEdBQU0sd0JBR1YsU0FBUzlCLFdBQVd2QyxHQUNoQixJQUFJc0UsRUFBWXRFLEVBQU1FLE9BQU9DLFFBQVEsdUJBQXVCOUMsY0FBYyxRQUN0RWtILEVBQVd2RSxFQUFNRSxPQUFPQyxRQUFRLHVCQUF1QnBDLFFBQVF5RyxPQUVuRSxHQUFJOUIsU0FBU2pDLFNBQVM4RCxHQUFXLENBQzdCRCxFQUFVRyxnQkFBZ0IsU0FDMUIsSUFBSTdELEVBQVM2QixlQUFlcEYsY0FBZixpQkFBQXdELE9BQThDMEQsRUFBOUMsT0FDYjlCLGVBQWUzQixZQUFZRixHQUMzQjhCLFNBQVMzQixPQUFPMkIsU0FBUzFCLFFBQVF1RCxHQUFXLFFBRWpCLElBQXBCN0IsU0FBU3ZILFFBR1csSUFBcEJ1SCxTQUFTdkgsU0FDWHdILFVBQVVsQyxTQUFTOEQsS0FBZ0I1QixVQUFVbEMsU0FBU2lDLFNBQVMsS0FDbEVFLFdBQVduQyxTQUFTOEQsS0FBZ0IzQixXQUFXbkMsU0FBU2lDLFNBQVMsT0FKbkVnQyxJQW1CSixTQUFTQSxJQUNMaEMsU0FBU3JCLEtBQUtrRCxHQUNkRCxFQUFVNUQsTUFBTUMsUUFBVSxRQUMxQixJQUFJTCxFQUFNbEQsU0FBU21ELGNBQWMsT0FFakMsSUFBSyxJQUFNQyxLQUFPcUMsV0FDVjBCLElBQWEvRCxJQUVUbUMsVUFBVWxDLFNBQVM4RCxJQUNmekcsUUFBUTZHLFNBQVNyRSxFQUFJOUMsVUFBVW9ILElBQUkscUJBQ25DL0csT0FBTzhHLFNBQVNyRSxFQUFJOUMsVUFBVW9ILElBQUksb0JBQ2xDbEgsT0FBT2lILFNBQVNyRSxFQUFJOUMsVUFBVW9ILElBQUkscUJBRS9CaEMsV0FBV25DLFNBQVM4RCxLQUN2QnpHLFFBQVE2RyxTQUFTckUsRUFBSTlDLFVBQVVvSCxJQUFJLHNCQUNuQy9HLE9BQU84RyxTQUFTckUsRUFBSTlDLFVBQVVvSCxJQUFJLHFCQUNsQ2xILE9BQU9pSCxTQUFTckUsRUFBSTlDLFVBQVVvSCxJQUFJLHNCQUcxQ3RFLEVBQUlXLGFBQWEsY0FBZXNELEdBQ2hDakUsRUFBSUksTUFBTVEsZ0JBQVYscUJBQUFMLE9BQWlEZ0MsV0FBV3JDLEdBQTVELE1BQ0FpQyxlQUFlckIsWUFBWWQsSUEvQmYsSUFBcEJvQyxTQUFTdkgsU0FDVHFILFFBQVFoQixTQUFRLFNBQUFDLEdBQUUsT0FBSUEsRUFBR2YsTUFBTUMsUUFBVSxVQUNyQzdDLFFBQVE2RyxVQUFTdkgsU0FBU0MsY0FBYyxTQUFTQSxjQUFjLGdCQUFnQnFELE1BQU1tRSxVQUFZLFFBQ2pHaEgsT0FBTzhHLFVBQVN2SCxTQUFTQyxjQUFjLFNBQVNBLGNBQWMsd0JBQXdCcUQsTUFBTW1FLFVBQVksU0FHNUduQyxTQUFTdkgsT0FBUyxHQUNsQjJKLGNBaUNSLFNBQVNDLFlBQ0wzSCxTQUFTQyxjQUFjLFNBQVNrRSxpQkFBaUIsdUJBQXVCQyxTQUFRLFNBQUFDLEdBQ3hFQSxFQUFHcEUsY0FBYyxRQUFRMkgsYUFBYSxVQUN0Q3ZELEVBQUdwRSxjQUFjLFFBQVFvSCxnQkFBZ0IsWUFHakQvQixTQUFXLEdBQ1hELGVBQWVmLFVBQVksR0FDM0JvRCxjQUdKLFNBQVNBLGNBQ0RoSCxRQUFRNkcsVUFBU3ZILFNBQVNDLGNBQWMscUJBQXFCcUQsTUFBTUMsUUFBVSxRQUM3RTlDLE9BQU84RyxVQUFTdkgsU0FBU0MsY0FBYyxvQkFBb0JxRCxNQUFNQyxRQUFVLFFBQy9FdkQsU0FBU0MsY0FBYyxTQUFTQSxjQUFjLGdCQUFnQnFELE1BQU1tRSxVQUFZLElBQzVFL0csUUFBUTZHLFVBQVN2SCxTQUFTQyxjQUFjLFNBQVNBLGNBQWMsZ0JBQWdCcUQsTUFBTW1FLFVBQVksS0FDakdoSCxPQUFPOEcsVUFBU3ZILFNBQVNDLGNBQWMsU0FBU0EsY0FBYyx3QkFBd0JxRCxNQUFNbUUsVUFBWSxLQWxCaEh6SCxTQUFTbUUsaUJBQWlCLGFBQWFDLFNBQVEsU0FBQUMsR0FBRSxPQUFJQSxFQUFHbkUsaUJBQWlCLFFBQVN5SDs7Ozs7O0lBNkJyRixXQUVHLEdBQXNCLG9CQUFYcEgsUUFBMEJBLE9BQU9MLGlCQUFrQixDQUMxRCxJQUNJMkgsRUFDQUMsRUEyTUFDLEVBN01BQyxFQUFRN0ksT0FBTzhJLE9BQU8sTUFHdEJDLEVBQWlCLFdBQ2pCQyxhQUFhTCxHQUNiQSxFQUFNTSxXQUFXUCxFQUFlLE1BRWhDUSxFQUFtQixhQThCbkJDLEVBQWdCLFNBQVVDLEdBSTFCLFNBQVNDLEVBQVVDLEdBQ2YsSUFBSUMsRUFPSixZQU5xQkMsSUFBakJGLEVBQUlHLFNBQ0pGLEVBQUlELEdBRUpDLEVBQUkxSSxTQUFTbUQsY0FBYyxNQUN6QjBGLEtBQU9KLEVBRU5DLEVBQUVFLFNBQVNFLFFBQVEsS0FBTSxJQUFNSixFQUFFSyxLQUU1QyxJQUFJQyxFQUNBQyxFQUNBQyxFQVdKLE9BVkkzSSxPQUFPNEksaUJBQ1BILEVBQVUsSUFBSUcsZUFDZEYsRUFBU1QsRUFBVVksVUFDbkJGLEVBQVVWLEVBQVVELEdBRWhCUyxPQUQ0QkwsSUFBNUJLLEVBQVFLLGlCQUE2QyxLQUFaSCxHQUFrQkEsSUFBWUQsRUFDN0RLLHFCQUFrQlgsRUFFbEJRLGdCQUdYSCxHQUVQTyxFQUFVLCtCQUNkMUIsRUFBZ0IsV0FDWixJQUFJMkIsRUFDQUMsRUFFQUMsRUFDQWIsRUFDQTdLLEVBRUEyTCxFQUNBWCxFQUNBVCxFQUNBcUIsRUFDQUMsRUFMQUMsRUFBa0IsRUFNdEIsU0FBU0MsSUF0RVEsSUFDYkMsRUF3RXdCLEtBRHhCRixHQUFtQixLQUVmekIsSUF4RVI5SCxPQUFPTCxpQkFBaUIsU0FBVWdJLEdBQWdCLEdBQ2xEM0gsT0FBT0wsaUJBQWlCLG9CQUFxQmdJLEdBQWdCLEdBQ3pEM0gsT0FBTzBKLG1CQUNQRCxFQUFXLElBQUlDLGlCQUFpQi9CLElBQ3ZCZ0MsUUFBUWxLLFNBQVNtSyxnQkFBaUIsQ0FDdkNDLFdBQVcsRUFDWEMsU0FBUyxFQUNUQyxZQUFZLElBRWhCakMsRUFBbUIsV0FDZixJQUNJMkIsRUFBU08sYUFDVGhLLE9BQU9pSyxvQkFBb0IsU0FBVXRDLEdBQWdCLEdBQ3JEM0gsT0FBT2lLLG9CQUFvQixvQkFBcUJ0QyxHQUFnQixHQUNsRSxNQUFPdUMsUUFHYnpLLFNBQVNtSyxnQkFBZ0JqSyxpQkFBaUIscUJBQXNCZ0ksR0FBZ0IsR0FDaEZHLEVBQW1CLFdBQ2ZySSxTQUFTbUssZ0JBQWdCSyxvQkFBb0IscUJBQXNCdEMsR0FBZ0IsR0FDbkYzSCxPQUFPaUssb0JBQW9CLFNBQVV0QyxHQUFnQixHQUNyRDNILE9BQU9pSyxvQkFBb0Isb0JBQXFCdEMsR0FBZ0IsTUF1RHhFLFNBQVN3QyxFQUFlQyxHQUNwQixPQUFPLFlBQ3NCLElBQXJCM0MsRUFBTTJDLEVBQUtuQixRQUNYbUIsRUFBS0MsTUFBTUMsZUFBZXRCLEVBQVMsYUFBYyxJQUFNb0IsRUFBS2pCLE1BQ3hEaUIsRUFBS0MsTUFBTWhELGFBQWEsU0FDeEIrQyxFQUFLQyxNQUFNL0csYUFBYSxPQUFRLElBQU04RyxFQUFLakIsUUFLM0QsU0FBU29CLEVBQVdqQixHQUNoQixPQUFPLFdBQ0gsSUFFSWtCLEVBRkE1SyxFQUFPSCxTQUFTRyxLQUNoQjZLLEVBQUloTCxTQUFTbUQsY0FBYyxLQUUvQjBHLEVBQUlvQixPQUFTLEtBQ2JELEVBQUUxRyxVQUFZdUYsRUFBSXFCLGNBQ2xCSCxFQUFNQyxFQUFFRyxxQkFBcUIsT0FBTyxNQUVoQ0osRUFBSWxILGFBQWEsY0FBZSxRQUNoQ2tILEVBQUl6SCxNQUFNOEgsU0FBVyxXQUNyQkwsRUFBSXpILE1BQU0rSCxNQUFRLEVBQ2xCTixFQUFJekgsTUFBTWdJLE9BQVMsRUFDbkJQLEVBQUl6SCxNQUFNaUksU0FBVyxTQUNyQnBMLEVBQUtxTCxhQUFhVCxFQUFLNUssRUFBS3NMLGFBRWhDMUIsS0FHUixTQUFTMkIsRUFBZTdCLEdBQ3BCLE9BQU8sV0FDSEEsRUFBSThCLFFBQVUsS0FDZDlCLEVBQUkrQixVQUFZLEtBQ2hCN0IsS0FNUixJQUhBMUIsSUFFQXVCLEVBQU81SixTQUFTbUwscUJBQXFCLE9BQ2hDbk4sRUFBSSxFQUFHQSxFQUFJNEwsRUFBSzdMLE9BQVFDLEdBQUssRUFBRyxDQUNqQyxJQUNJeUwsRUFBTUcsRUFBSzVMLEdBQUc2Tix3QkFDaEIsTUFBT3BCLEdBRUxoQixHQUFNLEVBVVZELEdBSklqQixHQUpKTSxFQUFPZSxFQUFLNUwsR0FBRzhOLGFBQWEsU0FDakJsQyxFQUFLNUwsR0FBRytOLGVBQWV4QyxFQUFTLFNBQ2hDSyxFQUFLNUwsR0FBRzhOLGFBQWEsZ0JBQ3BCakQsRUFBS21ELE1BQ1BuRCxFQUFLbUQsTUFBTSxLQUVYLENBQUMsR0FBSSxLQUVKLEdBQ1h0QyxFQUFPbkIsRUFBSSxHQUNYb0IsRUFBV0YsR0FBb0IsSUFBYkEsRUFBSXdDLE1BQTRCLElBQWR4QyxFQUFJeUMsT0FBMkIsSUFBWnpDLEVBQUkwQyxLQUE0QixJQUFmMUMsRUFBSTJDLE9BQ3hFM0MsR0FBcUIsSUFBZEEsRUFBSTRCLE9BQThCLElBQWY1QixFQUFJNkIsU0FBaUIzQixHQU8zQ0MsRUFBSzVMLEdBQUc0SixhQUFhLFNBQ3JCZ0MsRUFBSzVMLEdBQUc2TSxlQUFldEIsRUFBUyxhQUFjVixHQUU5Q1csRUFBS3pMLFVBR08sS0FEWjhMLEVBQU03QixFQUFNd0IsS0FHUnBCLFdBQVdzQyxFQUFlLENBQ3RCRSxNQUFPaEIsRUFBSzVMLEdBQ1p3TCxLQUFNQSxFQUNORSxLQUFNQSxJQUNOLFFBRUlmLElBQVJrQixRQUVnQmxCLEtBRGhCSyxFQUFVVixFQUFja0IsTUFFcEJLLEVBQU0sSUFBSWIsRUFDVmhCLEVBQU13QixHQUFRSyxFQUNkQSxFQUFJb0IsT0FBU0gsRUFBV2pCLEdBQ3hCQSxFQUFJOEIsUUFBVUQsRUFBZTdCLEdBQzdCQSxFQUFJK0IsVUFBWUYsRUFBZTdCLEdBQy9CQSxFQUFJd0MsS0FBSyxNQUFPN0MsR0FDaEJLLEVBQUl5QyxPQUNKeEMsR0FBbUIsS0FLMUJILEVBV01ILEVBQUt6TCxRQUFVaUssRUFBTXdCLElBQzVCcEIsV0FBV3NDLEVBQWUsQ0FDdEJFLE1BQU9oQixFQUFLNUwsR0FDWndMLEtBQU1BLEVBQ05FLEtBQU1BLElBQ04sUUFmZ0JmLElBQWhCWCxFQUFNd0IsR0FFTnhCLEVBQU13QixJQUFRLEVBQ1B4QixFQUFNd0IsR0FBTXlCLFNBR25CakQsRUFBTXdCLEdBQU0rQyxlQUNMdkUsRUFBTXdCLEdBQU15QixPQUNuQmpELEVBQU13QixJQUFRLEdBVzlCSSxFQUFPLEdBQ1BFLEdBQW1CLEVBQ25CQyxLQUdKaEMsRUFBVSxXQUNOeEgsT0FBT2lLLG9CQUFvQixPQUFRekMsR0FBUyxHQUM1Q0QsRUFBTU0sV0FBV1AsRUFBZSxJQUVSLGFBQXhCN0gsU0FBU3dNLFdBRVRqTSxPQUFPTCxpQkFBaUIsT0FBUTZILEdBQVMsR0FHekNBLEtBMU5YIiwiZmlsZSI6InNjcmlwdHMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gbmF2IG1vYmlsZSB0b2dnbGVcclxubGV0ICRuYXZJY29uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5hdl9fbWVudS1pY29uJylcclxuXHJcbiRuYXZJY29uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XHJcbiAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC50b2dnbGUoJ21lbnUtYWN0aXZlJylcclxufSlcclxuXHJcbmNvbnN0IG1vYmlsZSA9IHdpbmRvdy5tYXRjaE1lZGlhKFwiKG1heC13aWR0aDogNzY3LjlweClcIilcclxuY29uc3QgbGFwdG9wID0gd2luZG93Lm1hdGNoTWVkaWEoXCIobWluLXdpZHRoOiA3NjhweCkgYW5kIChtYXgtd2lkdGg6IDEyNTBweClcIilcclxuY29uc3QgZGVza3RvcCA9IHdpbmRvdy5tYXRjaE1lZGlhKFwiKG1pbi13aWR0aDogMTI1MXB4KVwiKVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBpZiBtYWtlIHBhZ2VcclxuaWYgKGRvY3VtZW50LmJvZHkuZGF0YXNldC5wYWdlID09PSAnbWFrZS1wYWdlJykge1xyXG4gICAgLy8gbWFrZSBwYWdlIGFkZCBwaXp6YSBpdGVtc1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1ha2VyJykucXVlcnlTZWxlY3RvcignLm1ha2VyX19ib2R5JykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB1cGRhdGVQaXp6YSlcclxuXHJcbiAgICBjb25zdCAkcGl6emFDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWFrZXItcGl6emEtYmcnKVxyXG5cclxuICAgIGxldCBwaXp6YUxheWVycyA9IDJcclxuICAgIGxldCBwaXp6YVRlbXAgPSBbXVxyXG5cclxuICAgIGNvbnN0IGltYWdlcyA9IHtcclxuICAgICAgICAn0JrRgNCw0YHQvdGL0LknOiAn0JrRgNCw0YHQvdGL0LkucG5nJyxcclxuICAgICAgICAn0JHQtdC70YvQuSc6ICfQkdC10LvRi9C5LnBuZycsXHJcbiAgICAgICAgJ9Cm0LXQt9Cw0YDRjCc6ICfQkdC10LvRi9C5LnBuZycsXHJcbiAgICAgICAgJ9CR0LDRgNCx0LXQutGOJzogJ9Ca0YDQsNGB0L3Ri9C5LnBuZycsXHJcbiAgICAgICAgJ9Ci0L7QvNCw0YInOiAn0KLQvtC80LDRgi5wbmcnLFxyXG4gICAgICAgICfQkNC90LDQvdCw0YEnOiAn0JDQvdCw0L3QsNGBLnBuZycsXHJcbiAgICAgICAgJ9Cc0LDRgdC70LjQvdGLJzogJ9Cc0LDRgdC70LjQvdGLLnBuZycsXHJcbiAgICAgICAgJ9Ca0L7RgNC90LjRiNC+0L3Riyc6ICfQmtC+0YDQvdC40YjQvtC90YsucG5nJyxcclxuICAgICAgICAn0KHQsNC70LDRgic6ICfQodCw0LvQsNGCLnBuZycsXHJcbiAgICAgICAgJ9Cl0LDQu9Cw0L/QtdC90YzQvic6ICfQpdCw0LvQsNC/0LXQvdGM0L4ucG5nJyxcclxuICAgICAgICAn0J/QtdGA0LXRhic6ICfQn9C10YDQtdGGLnBuZycsXHJcbiAgICAgICAgJ9Co0LDQvNC/0LjQvdGM0L7QvdGLJzogJ9Co0LDQvNC/0LjQvdGM0L7QvdGLLnBuZycsXHJcbiAgICAgICAgJ9Cb0YPQuic6ICfQm9GD0LoucG5nJyxcclxuICAgICAgICAn0KTQuNC70LUnOiAn0KTQuNC70LUucG5nJyxcclxuICAgICAgICAn0KTQsNGA0YgnOiAn0KTQsNGA0YgucG5nJyxcclxuICAgICAgICAn0J7RhdC+0YLQvdC40YfRjNC4JzogJ9Ce0YXQvtGC0L3QuNGH0YzQuC5wbmcnLFxyXG4gICAgICAgICfQmtC+0L/Rh9C10L3Ri9C5JzogJ9Ca0L7Qv9GH0LXQvdGL0LkucG5nJyxcclxuICAgICAgICAn0JLQtdGC0YfQuNC90LAnOiAn0JLQtdGC0YfQuNC90LAucG5nJyxcclxuICAgICAgICAn0JHQtdC60L7QvSc6ICfQkdC10LrQvtC9LnBuZycsXHJcbiAgICAgICAgJ9Cf0LXQv9C/0LXRgNC+0L3QuCc6ICfQn9C10L/Qv9C10YDQvtC90LgucG5nJyxcclxuICAgICAgICAn0JrRgNC10LLQtdGC0LrQuCc6ICfQmtGA0LXQstC10YLQutC4LnBuZycsXHJcbiAgICAgICAgJ9Cb0L7RgdC+0YHRjCc6ICfQm9C+0YHQvtGB0YwucG5nJyxcclxuICAgICAgICAn0JzQuNC00LjQuCc6ICfQpNCw0YDRiC5wbmcnLFxyXG4gICAgICAgICfQodCw0LvRj9C80LgnOiAn0KHQsNC70Y/QvNC4LnBuZycsXHJcbiAgICAgICAgJ9Cc0L7RhtCw0YDQtdC70LvQsCc6ICfQnNC+0YbQsNGA0LXQu9C70LAucG5nJyxcclxuICAgICAgICAn0J/QsNGA0LzQtdC30LDQvSc6ICfQn9Cw0YDQvNC10LfQsNC9LnBuZycsXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gdXBkYXRlUGl6emEoZXZlbnQpIHtcclxuICAgICAgICBsZXQgJHBpenphU3BhbiA9IGV2ZW50LnRhcmdldC5jbG9zZXN0KCcubWFrZXItcm93X19wcm9kdWN0JykucXVlcnlTZWxlY3Rvcignc3BhbicpXHJcbiAgICAgICAgbGV0ICRwaXp6YVR5cGUgPSBldmVudC50YXJnZXQuY2xvc2VzdCgnLm1ha2VyLXJvd19fcHJvZHVjdCcpLmRhdGFzZXQudHlwZVxyXG4gICAgICAgIGxldCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBpbWFnZXMpIHtcclxuXHJcbiAgICAgICAgICAgIGlmICgkcGl6emFUeXBlID09PSBrZXkpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocGl6emFUZW1wLmluY2x1ZGVzKGtleSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAkcGl6emFTcGFuLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcclxuICAgICAgICAgICAgICAgICAgICBsZXQgcmVtb3ZlID0gJHBpenphQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLWJnPSR7a2V5fV1gKVxyXG4gICAgICAgICAgICAgICAgICAgICRwaXp6YUNvbnRhaW5lci5yZW1vdmVDaGlsZChyZW1vdmUpXHJcbiAgICAgICAgICAgICAgICAgICAgcGl6emFUZW1wLnNwbGljZShwaXp6YVRlbXAuaW5kZXhPZigkcGl6emFUeXBlKSwgMSlcclxuXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICRwaXp6YVNwYW4uc3R5bGUuZGlzcGxheSA9ICdibG9jaydcclxuICAgICAgICAgICAgICAgICAgICBkaXYuc2V0QXR0cmlidXRlKCdkYXRhLWJnJywgJHBpenphVHlwZSlcclxuICAgICAgICAgICAgICAgICAgICBkaXYuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYHVybCgnLi9hc3NldHMvaW1nLyR7aW1hZ2VzW2tleV19JylgXHJcbiAgICAgICAgICAgICAgICAgICAgZGl2LnN0eWxlLnpJbmRleCA9IHBpenphTGF5ZXJzXHJcbiAgICAgICAgICAgICAgICAgICAgJHBpenphQ29udGFpbmVyLmFwcGVuZENoaWxkKGRpdilcclxuICAgICAgICAgICAgICAgICAgICBwaXp6YVRlbXAucHVzaChrZXkpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcGl6emFMYXllcnMrK1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGNsZWFyIGFsbCBidXR0b25cclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5waXp6YS1uZXcnKS5mb3JFYWNoKGVsID0+IGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xlYXJQaXp6YSkpXHJcblxyXG4gICAgZnVuY3Rpb24gY2xlYXJQaXp6YSgpIHtcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWFrZXInKS5xdWVyeVNlbGVjdG9yQWxsKCcubWFrZXItcm93X19wcm9kdWN0JykuZm9yRWFjaChlbCA9PiBlbC5xdWVyeVNlbGVjdG9yKCdzcGFuJykuc3R5bGUuZGlzcGxheSA9ICdub25lJylcclxuICAgICAgICAkcGl6emFDb250YWluZXIuaW5uZXJIVE1MID0gJydcclxuICAgICAgICBwaXp6YUxheWVycyA9IDJcclxuICAgICAgICBwaXp6YVRlbXAgPSBbXVxyXG4gICAgfVxyXG59XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIGlmIGhhbGYgcGFnZVxyXG5pZiAoZG9jdW1lbnQuYm9keS5kYXRhc2V0LnBhZ2UgPT09ICdoYWxmLXBhZ2UnKSB7XHJcbiAgICAvLyBhY2NvcmRpb24gbW9iaWxlIGhhbGYgcGFnZVxyXG4gICAgY29uc3QgYWNjb3JkaW9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hY2NvcmRpb24nKVxyXG4gICAgZm9yIChjb25zdCBhY2NvcmRpb24gb2YgYWNjb3JkaW9ucykge1xyXG4gICAgICAgIGNvbnN0IHBhbmVscyA9IGFjY29yZGlvbi5xdWVyeVNlbGVjdG9yQWxsKCcuYWNjb3JkaW9uX19wYW5lbCcpXHJcbiAgICAgICAgZm9yIChjb25zdCBwYW5lbCBvZiBwYW5lbHMpIHtcclxuICAgICAgICAgICAgY29uc3QgaGVhZCA9IHBhbmVsLnF1ZXJ5U2VsZWN0b3IoJy5hY2NvcmRpb25fX2hlYWRlcicpXHJcbiAgICAgICAgICAgIGhlYWQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG90aGVyUGFuZWwgb2YgcGFuZWxzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG90aGVyUGFuZWwgIT09IHBhbmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG90aGVyUGFuZWwuY2xhc3NMaXN0LnJlbW92ZSgnYWNjb3JkaW9uX19leHBhbmRlZCcpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBwYW5lbC5jbGFzc0xpc3QudG9nZ2xlKCdhY2NvcmRpb25fX2V4cGFuZGVkJylcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gaGFsZiBwYWdlIGFkZCBwaXp6YSBpdGVtc1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhhbGYnKS5xdWVyeVNlbGVjdG9yKCcubWFrZXJfX2JvZHknKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHVwZGF0ZUhhbGYpXHJcbiAgICBjb25zdCB3YXJuaW5nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhhbGYnKS5xdWVyeVNlbGVjdG9yQWxsKCcuaGFsZl9fd2FybmluZycpXHJcblxyXG4gICAgY29uc3QgJGhhbGZDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGFsZi1waXp6YS1iZycpXHJcblxyXG4gICAgbGV0IGhhbGZUZW1wID0gW11cclxuICAgIGNvbnN0IGZpcnN0SGFsZiA9IFsnMScsJzInLCczJywnNCcsJzUnLCc2JywnNycsJzgnLCc5JywnMTAnLCcxMScsJzEyJ11cclxuICAgIGNvbnN0IHNlY29uZEhhbGYgPSBbJzEzJywnMTQnLCcxNScsJzE2JywnMTcnLCcxOCcsJzE5JywnMjAnLCcyMScsJzIyJywnMjMnLCcyNCddXHJcblxyXG4gICAgY29uc3QgaW1hZ2VzSGFsZiA9IHtcclxuICAgICAgICAnMSc6ICfQkNC00YDQuNCw0L3Qvi3QmNGC0LDQu9GM0Y/QvdC+LnBuZycsXHJcbiAgICAgICAgJzInOiAn0KHRi9GA0L3QsNGPLdCR0LDQvdC00LAucG5nJyxcclxuICAgICAgICAnMyc6ICfQotC+0LzQsNGC0L3Ri9C5LdCm0YvQv9C70LXQvdC+0LoucG5nJyxcclxuICAgICAgICAnNCc6ICfQptC10LfQsNGA0YwucG5nJyxcclxuICAgICAgICAnNSc6ICfQkNC90LDQvdCw0YHQvtCy0YvQuS3QrdC60YHQv9GA0LXRgdGBLnBuZycsXHJcbiAgICAgICAgJzYnOiAn0JHQvtC70LPQsNGA0YHQutC40Lkt0J/QtdGA0LXRhi5wbmcnLFxyXG4gICAgICAgICc3JzogJ9CT0YDQuNCx0L3QsNGPLdCm0YvQv9CwLnBuZycsXHJcbiAgICAgICAgJzgnOiAn0JTQttC+0L3QuC3Qn9C10L/QtdGA0L7QvdC4LnBuZycsXHJcbiAgICAgICAgJzknOiAn0JTQvtGH0Ywt0JzRj9GB0L3QuNC60LAucG5nJyxcclxuICAgICAgICAnMTAnOiAn0JzQsNGA0LPQvi3QoNC40YLQsC5wbmcnLFxyXG4gICAgICAgICcxMSc6ICfQn9C40LLQvdCw0Y8ucG5nJyxcclxuICAgICAgICAnMTInOiAn0J/QvtC00LLQvtC00L3QsNGPLdCR0YDQsNGC0LLQsC5wbmcnLFxyXG4gICAgICAgICcxMyc6ICfQkNC00YDQuNCw0L3Qvi3QmNGC0LDQu9GM0Y/QvdC+LnBuZycsXHJcbiAgICAgICAgJzE0JzogJ9Ch0YvRgNC90LDRjy3QkdCw0L3QtNCwLnBuZycsXHJcbiAgICAgICAgJzE1JzogJ9Ci0L7QvNCw0YLQvdGL0Lkt0KbRi9C/0LvQtdC90L7Qui5wbmcnLFxyXG4gICAgICAgICcxNic6ICfQptC10LfQsNGA0YwucG5nJyxcclxuICAgICAgICAnMTcnOiAn0JDQvdCw0L3QsNGB0L7QstGL0Lkt0K3QutGB0L/RgNC10YHRgS5wbmcnLFxyXG4gICAgICAgICcxOCc6ICfQkdC+0LvQs9Cw0YDRgdC60LjQuS3Qn9C10YDQtdGGLnBuZycsXHJcbiAgICAgICAgJzE5JzogJ9CT0YDQuNCx0L3QsNGPLdCm0YvQv9CwLnBuZycsXHJcbiAgICAgICAgJzIwJzogJ9CU0LbQvtC90Lgt0J/QtdC/0LXRgNC+0L3QuC5wbmcnLFxyXG4gICAgICAgICcyMSc6ICfQlNC+0YfRjC3QnNGP0YHQvdC40LrQsC5wbmcnLFxyXG4gICAgICAgICcyMic6ICfQnNCw0YDQs9C+LdCg0LjRgtCwLnBuZycsXHJcbiAgICAgICAgJzIzJzogJ9Cf0LjQstC90LDRjy5wbmcnLFxyXG4gICAgICAgICcyNCc6ICfQn9C+0LTQstC+0LTQvdCw0Y8t0JHRgNCw0YLQstCwLnBuZycsXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gdXBkYXRlSGFsZihldmVudCkge1xyXG4gICAgICAgIGxldCAkaGFsZlNwYW4gPSBldmVudC50YXJnZXQuY2xvc2VzdCgnLm1ha2VyLXJvd19fcHJvZHVjdCcpLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKVxyXG4gICAgICAgIGxldCAkaGFsZk51bSA9IGV2ZW50LnRhcmdldC5jbG9zZXN0KCcubWFrZXItcm93X19wcm9kdWN0JykuZGF0YXNldC5udW1iZXJcclxuXHJcbiAgICAgICAgaWYgKGhhbGZUZW1wLmluY2x1ZGVzKCRoYWxmTnVtKSkge1xyXG4gICAgICAgICAgICAkaGFsZlNwYW4ucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpXHJcbiAgICAgICAgICAgIGxldCByZW1vdmUgPSAkaGFsZkNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKGBbZGF0YS1oYWxmYmc9XCIkeyRoYWxmTnVtfVwiXWApXHJcbiAgICAgICAgICAgICRoYWxmQ29udGFpbmVyLnJlbW92ZUNoaWxkKHJlbW92ZSlcclxuICAgICAgICAgICAgaGFsZlRlbXAuc3BsaWNlKGhhbGZUZW1wLmluZGV4T2YoJGhhbGZOdW0pLCAxKVxyXG5cclxuICAgICAgICB9IGVsc2UgaWYgKGhhbGZUZW1wLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICBwdXNoSGFsZigpXHJcblxyXG4gICAgICAgIH0gZWxzZSBpZiAoaGFsZlRlbXAubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAgIGlmICgoZmlyc3RIYWxmLmluY2x1ZGVzKCRoYWxmTnVtKSkgJiYgKCFmaXJzdEhhbGYuaW5jbHVkZXMoaGFsZlRlbXBbMF0pKSB8fFxyXG4gICAgICAgICAgICAoKHNlY29uZEhhbGYuaW5jbHVkZXMoJGhhbGZOdW0pKSAmJiAoIXNlY29uZEhhbGYuaW5jbHVkZXMoaGFsZlRlbXBbMF0pKSkpIHtcclxuICAgICAgICAgICAgICAgIHB1c2hIYWxmKClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGhhbGZUZW1wLmxlbmd0aCA9PT0gMikge1xyXG4gICAgICAgICAgICB3YXJuaW5nLmZvckVhY2goZWwgPT4gZWwuc3R5bGUuZGlzcGxheSA9ICdub25lJylcclxuICAgICAgICAgICAgaWYgKGRlc2t0b3AubWF0Y2hlcykgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhhbGYnKS5xdWVyeVNlbGVjdG9yKCcubWFrZXJfX2JvZHknKS5zdHlsZS5tYXJnaW5Ub3AgPSAnODBweCdcclxuICAgICAgICAgICAgaWYgKGxhcHRvcC5tYXRjaGVzKSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGFsZicpLnF1ZXJ5U2VsZWN0b3IoJy5tYWtlci10ZXh0X19jb250cm9sJykuc3R5bGUubWFyZ2luVG9wID0gJzMwcHgnXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoaGFsZlRlbXAubGVuZ3RoIDwgMikge1xyXG4gICAgICAgICAgICBjbGVhclN0eWxlcygpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBwdXNoSGFsZigpIHtcclxuICAgICAgICAgICAgaGFsZlRlbXAucHVzaCgkaGFsZk51bSlcclxuICAgICAgICAgICAgJGhhbGZTcGFuLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snXHJcbiAgICAgICAgICAgIGxldCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG5cclxuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gaW1hZ2VzSGFsZikge1xyXG4gICAgICAgICAgICAgICAgaWYgKCRoYWxmTnVtID09PSBrZXkpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpcnN0SGFsZi5pbmNsdWRlcygkaGFsZk51bSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRlc2t0b3AubWF0Y2hlcykgZGl2LmNsYXNzTGlzdC5hZGQoJ2hhbGYtbGVmdC1kZXNrdG9wJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxhcHRvcC5tYXRjaGVzKSBkaXYuY2xhc3NMaXN0LmFkZCgnaGFsZi1sZWZ0LWxhcHRvcCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtb2JpbGUubWF0Y2hlcykgZGl2LmNsYXNzTGlzdC5hZGQoJ2hhbGYtbGVmdC1tb2JpbGUnKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNlY29uZEhhbGYuaW5jbHVkZXMoJGhhbGZOdW0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkZXNrdG9wLm1hdGNoZXMpIGRpdi5jbGFzc0xpc3QuYWRkKCdoYWxmLXJpZ2h0LWRlc2t0b3AnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobGFwdG9wLm1hdGNoZXMpIGRpdi5jbGFzc0xpc3QuYWRkKCdoYWxmLXJpZ2h0LWxhcHRvcCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtb2JpbGUubWF0Y2hlcykgZGl2LmNsYXNzTGlzdC5hZGQoJ2hhbGYtcmlnaHQtbW9iaWxlJylcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGRpdi5zZXRBdHRyaWJ1dGUoJ2RhdGEtaGFsZmJnJywgJGhhbGZOdW0pXHJcbiAgICAgICAgICAgICAgICAgICAgZGl2LnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJy4vYXNzZXRzL2ltZy8ke2ltYWdlc0hhbGZba2V5XX0nKWBcclxuICAgICAgICAgICAgICAgICAgICAkaGFsZkNvbnRhaW5lci5hcHBlbmRDaGlsZChkaXYpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gY2xlYXIgYWxsIGJ1dHRvblxyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmhhbGYtbmV3JykuZm9yRWFjaChlbCA9PiBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsZWFySGFsZikpXHJcblxyXG4gICAgZnVuY3Rpb24gY2xlYXJIYWxmKCkge1xyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oYWxmJykucXVlcnlTZWxlY3RvckFsbCgnLm1ha2VyLXJvd19fcHJvZHVjdCcpLmZvckVhY2goZWwgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZWwucXVlcnlTZWxlY3Rvcignc3BhbicpLmhhc0F0dHJpYnV0ZSgnc3R5bGUnKSkge1xyXG4gICAgICAgICAgICAgICAgZWwucXVlcnlTZWxlY3Rvcignc3BhbicpLnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICBoYWxmVGVtcCA9IFtdXHJcbiAgICAgICAgJGhhbGZDb250YWluZXIuaW5uZXJIVE1MID0gJydcclxuICAgICAgICBjbGVhclN0eWxlcygpXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY2xlYXJTdHlsZXMoKSB7XHJcbiAgICAgICAgaWYgKGRlc2t0b3AubWF0Y2hlcykgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLndhcm5pbmdfX2Rlc2t0b3AnKS5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnXHJcbiAgICAgICAgaWYgKGxhcHRvcC5tYXRjaGVzKSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud2FybmluZ19fbGFwdG9wJykuc3R5bGUuZGlzcGxheSA9ICdmbGV4J1xyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oYWxmJykucXVlcnlTZWxlY3RvcignLm1ha2VyX19ib2R5Jykuc3R5bGUubWFyZ2luVG9wID0gJzAnXHJcbiAgICAgICAgaWYgKGRlc2t0b3AubWF0Y2hlcykgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhhbGYnKS5xdWVyeVNlbGVjdG9yKCcubWFrZXJfX2JvZHknKS5zdHlsZS5tYXJnaW5Ub3AgPSAnMCdcclxuICAgICAgICBpZiAobGFwdG9wLm1hdGNoZXMpIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oYWxmJykucXVlcnlTZWxlY3RvcignLm1ha2VyLXRleHRfX2NvbnRyb2wnKS5zdHlsZS5tYXJnaW5Ub3AgPSAnMCdcclxuICAgIH1cclxufVxuLyohXG4gKiBAY29weXJpZ2h0IENvcHlyaWdodCAoYykgMjAxNyBJY29Nb29uLmlvXG4gKiBAbGljZW5zZSAgIExpY2Vuc2VkIHVuZGVyIE1JVCBsaWNlbnNlXG4gKiAgICAgICAgICAgIFNlZSBodHRwczovL2dpdGh1Yi5jb20vS2V5YW1vb24vc3ZneHVzZVxuICogQHZlcnNpb24gICAxLjIuNlxuICovXG4vKmpzbGludCBicm93c2VyOiB0cnVlICovXG4vKmdsb2JhbCBYRG9tYWluUmVxdWVzdCwgTXV0YXRpb25PYnNlcnZlciwgd2luZG93ICovXG4oZnVuY3Rpb24gKCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKSB7XG4gICAgICAgIHZhciBjYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7IC8vIGhvbGRzIHhociBvYmplY3RzIHRvIHByZXZlbnQgbXVsdGlwbGUgcmVxdWVzdHNcbiAgICAgICAgdmFyIGNoZWNrVXNlRWxlbXM7XG4gICAgICAgIHZhciB0aWQ7IC8vIHRpbWVvdXQgaWRcbiAgICAgICAgdmFyIGRlYm91bmNlZENoZWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpZCk7XG4gICAgICAgICAgICB0aWQgPSBzZXRUaW1lb3V0KGNoZWNrVXNlRWxlbXMsIDEwMCk7XG4gICAgICAgIH07XG4gICAgICAgIHZhciB1bm9ic2VydmVDaGFuZ2VzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9O1xuICAgICAgICB2YXIgb2JzZXJ2ZUNoYW5nZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgb2JzZXJ2ZXI7XG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCBkZWJvdW5jZWRDaGVjaywgZmFsc2UpO1xuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJvcmllbnRhdGlvbmNoYW5nZVwiLCBkZWJvdW5jZWRDaGVjaywgZmFsc2UpO1xuICAgICAgICAgICAgaWYgKHdpbmRvdy5NdXRhdGlvbk9ic2VydmVyKSB7XG4gICAgICAgICAgICAgICAgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihkZWJvdW5jZWRDaGVjayk7XG4gICAgICAgICAgICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZShkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsIHtcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRMaXN0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBzdWJ0cmVlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiB0cnVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdW5vYnNlcnZlQ2hhbmdlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIGRlYm91bmNlZENoZWNrLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm9yaWVudGF0aW9uY2hhbmdlXCIsIGRlYm91bmNlZENoZWNrLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGlnbm9yZSkge31cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTVN1YnRyZWVNb2RpZmllZFwiLCBkZWJvdW5jZWRDaGVjaywgZmFsc2UpO1xuICAgICAgICAgICAgICAgIHVub2JzZXJ2ZUNoYW5nZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiRE9NU3VidHJlZU1vZGlmaWVkXCIsIGRlYm91bmNlZENoZWNrLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIGRlYm91bmNlZENoZWNrLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwib3JpZW50YXRpb25jaGFuZ2VcIiwgZGVib3VuY2VkQ2hlY2ssIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB2YXIgY3JlYXRlUmVxdWVzdCA9IGZ1bmN0aW9uICh1cmwpIHtcbiAgICAgICAgICAgIC8vIEluIElFIDksIGNyb3NzIG9yaWdpbiByZXF1ZXN0cyBjYW4gb25seSBiZSBzZW50IHVzaW5nIFhEb21haW5SZXF1ZXN0LlxuICAgICAgICAgICAgLy8gWERvbWFpblJlcXVlc3Qgd291bGQgZmFpbCBpZiBDT1JTIGhlYWRlcnMgYXJlIG5vdCBzZXQuXG4gICAgICAgICAgICAvLyBUaGVyZWZvcmUsIFhEb21haW5SZXF1ZXN0IHNob3VsZCBvbmx5IGJlIHVzZWQgd2l0aCBjcm9zcyBvcmlnaW4gcmVxdWVzdHMuXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRPcmlnaW4obG9jKSB7XG4gICAgICAgICAgICAgICAgdmFyIGE7XG4gICAgICAgICAgICAgICAgaWYgKGxvYy5wcm90b2NvbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGEgPSBsb2M7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO1xuICAgICAgICAgICAgICAgICAgICBhLmhyZWYgPSBsb2M7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBhLnByb3RvY29sLnJlcGxhY2UoLzovZywgXCJcIikgKyBhLmhvc3Q7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgUmVxdWVzdDtcbiAgICAgICAgICAgIHZhciBvcmlnaW47XG4gICAgICAgICAgICB2YXIgb3JpZ2luMjtcbiAgICAgICAgICAgIGlmICh3aW5kb3cuWE1MSHR0cFJlcXVlc3QpIHtcbiAgICAgICAgICAgICAgICBSZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgICAgICAgICAgb3JpZ2luID0gZ2V0T3JpZ2luKGxvY2F0aW9uKTtcbiAgICAgICAgICAgICAgICBvcmlnaW4yID0gZ2V0T3JpZ2luKHVybCk7XG4gICAgICAgICAgICAgICAgaWYgKFJlcXVlc3Qud2l0aENyZWRlbnRpYWxzID09PSB1bmRlZmluZWQgJiYgb3JpZ2luMiAhPT0gXCJcIiAmJiBvcmlnaW4yICE9PSBvcmlnaW4pIHtcbiAgICAgICAgICAgICAgICAgICAgUmVxdWVzdCA9IFhEb21haW5SZXF1ZXN0IHx8IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBSZXF1ZXN0ID0gWE1MSHR0cFJlcXVlc3Q7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFJlcXVlc3Q7XG4gICAgICAgIH07XG4gICAgICAgIHZhciB4bGlua05TID0gXCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCI7XG4gICAgICAgIGNoZWNrVXNlRWxlbXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgYmFzZTtcbiAgICAgICAgICAgIHZhciBiY3I7XG4gICAgICAgICAgICB2YXIgZmFsbGJhY2sgPSBcIlwiOyAvLyBvcHRpb25hbCBmYWxsYmFjayBVUkwgaW4gY2FzZSBubyBiYXNlIHBhdGggdG8gU1ZHIGZpbGUgd2FzIGdpdmVuIGFuZCBubyBzeW1ib2wgZGVmaW5pdGlvbiB3YXMgZm91bmQuXG4gICAgICAgICAgICB2YXIgaGFzaDtcbiAgICAgICAgICAgIHZhciBocmVmO1xuICAgICAgICAgICAgdmFyIGk7XG4gICAgICAgICAgICB2YXIgaW5Qcm9ncmVzc0NvdW50ID0gMDtcbiAgICAgICAgICAgIHZhciBpc0hpZGRlbjtcbiAgICAgICAgICAgIHZhciBSZXF1ZXN0O1xuICAgICAgICAgICAgdmFyIHVybDtcbiAgICAgICAgICAgIHZhciB1c2VzO1xuICAgICAgICAgICAgdmFyIHhocjtcbiAgICAgICAgICAgIGZ1bmN0aW9uIG9ic2VydmVJZkRvbmUoKSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgZG9uZSB3aXRoIG1ha2luZyBjaGFuZ2VzLCBzdGFydCB3YXRjaGluZyBmb3IgY2hhZ25lcyBpbiBET00gYWdhaW5cbiAgICAgICAgICAgICAgICBpblByb2dyZXNzQ291bnQgLT0gMTtcbiAgICAgICAgICAgICAgICBpZiAoaW5Qcm9ncmVzc0NvdW50ID09PSAwKSB7IC8vIGlmIGFsbCB4aHJzIHdlcmUgcmVzb2x2ZWRcbiAgICAgICAgICAgICAgICAgICAgdW5vYnNlcnZlQ2hhbmdlcygpOyAvLyBtYWtlIHN1cmUgdG8gcmVtb3ZlIG9sZCBoYW5kbGVyc1xuICAgICAgICAgICAgICAgICAgICBvYnNlcnZlQ2hhbmdlcygpOyAvLyB3YXRjaCBmb3IgY2hhbmdlcyB0byBET01cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmdW5jdGlvbiBhdHRyVXBkYXRlRnVuYyhzcGVjKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNhY2hlW3NwZWMuYmFzZV0gIT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNwZWMudXNlRWwuc2V0QXR0cmlidXRlTlMoeGxpbmtOUywgXCJ4bGluazpocmVmXCIsIFwiI1wiICsgc3BlYy5oYXNoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzcGVjLnVzZUVsLmhhc0F0dHJpYnV0ZShcImhyZWZcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGVjLnVzZUVsLnNldEF0dHJpYnV0ZShcImhyZWZcIiwgXCIjXCIgKyBzcGVjLmhhc2gpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZ1bmN0aW9uIG9ubG9hZEZ1bmMoeGhyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJvZHkgPSBkb2N1bWVudC5ib2R5O1xuICAgICAgICAgICAgICAgICAgICB2YXIgeCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ4XCIpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc3ZnO1xuICAgICAgICAgICAgICAgICAgICB4aHIub25sb2FkID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgeC5pbm5lckhUTUwgPSB4aHIucmVzcG9uc2VUZXh0O1xuICAgICAgICAgICAgICAgICAgICBzdmcgPSB4LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic3ZnXCIpWzBdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3ZnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdmcuc2V0QXR0cmlidXRlKFwiYXJpYS1oaWRkZW5cIiwgXCJ0cnVlXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3ZnLnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3ZnLnN0eWxlLndpZHRoID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN2Zy5zdHlsZS5oZWlnaHQgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3ZnLnN0eWxlLm92ZXJmbG93ID0gXCJoaWRkZW5cIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHkuaW5zZXJ0QmVmb3JlKHN2ZywgYm9keS5maXJzdENoaWxkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBvYnNlcnZlSWZEb25lKCk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZ1bmN0aW9uIG9uRXJyb3JUaW1lb3V0KHhocikge1xuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHhoci5vbmVycm9yID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgeGhyLm9udGltZW91dCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIG9ic2VydmVJZkRvbmUoKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdW5vYnNlcnZlQ2hhbmdlcygpOyAvLyBzdG9wIHdhdGNoaW5nIGZvciBjaGFuZ2VzIHRvIERPTVxuICAgICAgICAgICAgLy8gZmluZCBhbGwgdXNlIGVsZW1lbnRzXG4gICAgICAgICAgICB1c2VzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJ1c2VcIik7XG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdXNlcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGJjciA9IHVzZXNbaV0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoaWdub3JlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGZhaWxlZCB0byBnZXQgYm91bmRpbmcgcmVjdGFuZ2xlIG9mIHRoZSB1c2UgZWxlbWVudFxuICAgICAgICAgICAgICAgICAgICBiY3IgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaHJlZiA9IHVzZXNbaV0uZ2V0QXR0cmlidXRlKFwiaHJlZlwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgfHwgdXNlc1tpXS5nZXRBdHRyaWJ1dGVOUyh4bGlua05TLCBcImhyZWZcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHx8IHVzZXNbaV0uZ2V0QXR0cmlidXRlKFwieGxpbms6aHJlZlwiKTtcbiAgICAgICAgICAgICAgICBpZiAoaHJlZiAmJiBocmVmLnNwbGl0KSB7XG4gICAgICAgICAgICAgICAgICAgIHVybCA9IGhyZWYuc3BsaXQoXCIjXCIpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHVybCA9IFtcIlwiLCBcIlwiXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYmFzZSA9IHVybFswXTtcbiAgICAgICAgICAgICAgICBoYXNoID0gdXJsWzFdO1xuICAgICAgICAgICAgICAgIGlzSGlkZGVuID0gYmNyICYmIGJjci5sZWZ0ID09PSAwICYmIGJjci5yaWdodCA9PT0gMCAmJiBiY3IudG9wID09PSAwICYmIGJjci5ib3R0b20gPT09IDA7XG4gICAgICAgICAgICAgICAgaWYgKGJjciAmJiBiY3Iud2lkdGggPT09IDAgJiYgYmNyLmhlaWdodCA9PT0gMCAmJiAhaXNIaWRkZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHVzZSBlbGVtZW50IGlzIGVtcHR5XG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHRoZXJlIGlzIGEgcmVmZXJlbmNlIHRvIGFuIGV4dGVybmFsIFNWRywgdHJ5IHRvIGZldGNoIGl0XG4gICAgICAgICAgICAgICAgICAgIC8vIHVzZSB0aGUgb3B0aW9uYWwgZmFsbGJhY2sgVVJMIGlmIHRoZXJlIGlzIG5vIHJlZmVyZW5jZSB0byBhbiBleHRlcm5hbCBTVkdcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZhbGxiYWNrICYmICFiYXNlLmxlbmd0aCAmJiBoYXNoICYmICFkb2N1bWVudC5nZXRFbGVtZW50QnlJZChoYXNoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZSA9IGZhbGxiYWNrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh1c2VzW2ldLmhhc0F0dHJpYnV0ZShcImhyZWZcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXNbaV0uc2V0QXR0cmlidXRlTlMoeGxpbmtOUywgXCJ4bGluazpocmVmXCIsIGhyZWYpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChiYXNlLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2NoZWR1bGUgdXBkYXRpbmcgeGxpbms6aHJlZlxuICAgICAgICAgICAgICAgICAgICAgICAgeGhyID0gY2FjaGVbYmFzZV07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoeGhyICE9PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdHJ1ZSBzaWduaWZpZXMgdGhhdCBwcmVwZW5kaW5nIHRoZSBTVkcgd2FzIG5vdCByZXF1aXJlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoYXR0clVwZGF0ZUZ1bmMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VFbDogdXNlc1tpXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZTogYmFzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzaDogaGFzaFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh4aHIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlcXVlc3QgPSBjcmVhdGVSZXF1ZXN0KGJhc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChSZXF1ZXN0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeGhyID0gbmV3IFJlcXVlc3QoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVbYmFzZV0gPSB4aHI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHhoci5vbmxvYWQgPSBvbmxvYWRGdW5jKHhocik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHhoci5vbmVycm9yID0gb25FcnJvclRpbWVvdXQoeGhyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeGhyLm9udGltZW91dCA9IG9uRXJyb3JUaW1lb3V0KHhocik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHhoci5vcGVuKFwiR0VUXCIsIGJhc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4aHIuc2VuZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpblByb2dyZXNzQ291bnQgKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzSGlkZGVuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FjaGVbYmFzZV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbWVtYmVyIHRoaXMgVVJMIGlmIHRoZSB1c2UgZWxlbWVudCB3YXMgbm90IGVtcHR5IGFuZCBubyByZXF1ZXN0IHdhcyBzZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVbYmFzZV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjYWNoZVtiYXNlXS5vbmxvYWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBpdCB0dXJucyBvdXQgdGhhdCBwcmVwZW5kaW5nIHRoZSBTVkcgaXMgbm90IG5lY2Vzc2FyeSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhYm9ydCB0aGUgaW4tcHJvZ3Jlc3MgeGhyLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlW2Jhc2VdLmFib3J0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGNhY2hlW2Jhc2VdLm9ubG9hZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWNoZVtiYXNlXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYmFzZS5sZW5ndGggJiYgY2FjaGVbYmFzZV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoYXR0clVwZGF0ZUZ1bmMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZUVsOiB1c2VzW2ldLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2U6IGJhc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzaDogaGFzaFxuICAgICAgICAgICAgICAgICAgICAgICAgfSksIDApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdXNlcyA9IFwiXCI7XG4gICAgICAgICAgICBpblByb2dyZXNzQ291bnQgKz0gMTtcbiAgICAgICAgICAgIG9ic2VydmVJZkRvbmUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIHdpbkxvYWQ7XG4gICAgICAgIHdpbkxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgd2luTG9hZCwgZmFsc2UpOyAvLyB0byBwcmV2ZW50IG1lbW9yeSBsZWFrc1xuICAgICAgICAgICAgdGlkID0gc2V0VGltZW91dChjaGVja1VzZUVsZW1zLCAwKTtcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgIT09IFwiY29tcGxldGVcIikge1xuICAgICAgICAgICAgLy8gVGhlIGxvYWQgZXZlbnQgZmlyZXMgd2hlbiBhbGwgcmVzb3VyY2VzIGhhdmUgZmluaXNoZWQgbG9hZGluZywgd2hpY2ggYWxsb3dzIGRldGVjdGluZyB3aGV0aGVyIFNWRyB1c2UgZWxlbWVudHMgYXJlIGVtcHR5LlxuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIHdpbkxvYWQsIGZhbHNlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIE5vIG5lZWQgdG8gYWRkIGEgbGlzdGVuZXIgaWYgdGhlIGRvY3VtZW50IGlzIGFscmVhZHkgbG9hZGVkLCBpbml0aWFsaXplIGltbWVkaWF0ZWx5LlxuICAgICAgICAgICAgd2luTG9hZCgpO1xuICAgICAgICB9XG4gICAgfVxufSgpKTtcbiJdfQ==
